<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3125</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Remove Backslash Continuation</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-3125.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Jim J. Jewett &lt;JimJJewett&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Rejected</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">29-Apr-2007</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">29-Apr-2007, 30-Apr-2007, 04-May-2007</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#rejection-notice" id="id5">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract" id="id6">Abstract</a></li>
<li><a class="reference internal" href="#motivation" id="id7">Motivation</a></li>
<li><a class="reference internal" href="#existing-line-continuation-methods" id="id8">Existing Line Continuation Methods</a><ul>
<li><a class="reference internal" href="#parenthetical-expression" id="id9">Parenthetical Expression - <tt class="docutils literal"><span class="pre">([{}])</span></tt></a></li>
<li><a class="reference internal" href="#triple-quoted-strings" id="id10">Triple-Quoted Strings</a></li>
<li><a class="reference internal" href="#terminal-in-the-general-case" id="id11">Terminal <tt class="docutils literal">\</tt> in the general case</a></li>
<li><a class="reference internal" href="#terminal-within-a-string" id="id12">Terminal <tt class="docutils literal">\</tt> within a string</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternate-proposals" id="id13">Alternate Proposals</a></li>
<li><a class="reference internal" href="#open-issues" id="id14">Open Issues</a></li>
<li><a class="reference internal" href="#references" id="id15">References</a></li>
<li><a class="reference internal" href="#copyright" id="id16">Copyright</a></li>
</ul>
</div>
<div class="section" id="rejection-notice">
<h1><a class="toc-backref" href="#id5">Rejection Notice</a></h1>
<p>This PEP is rejected.  There wasn't enough support in favor, the
feature to be removed isn't all that harmful, and there are some use
cases that would become harder.</p>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id6">Abstract</a></h1>
<p>Python initially inherited its parsing from C.  While this has been
generally useful, there are some remnants which have been less useful
for Python, and should be eliminated.</p>
<p>This PEP proposes elimination of terminal <tt class="docutils literal">\</tt> as a marker for line
continuation.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id7">Motivation</a></h1>
<p>One goal for Python 3000 should be to simplify the language by
removing unnecessary or duplicated features.  There are currently
several ways to indicate that a logical line is continued on the
following physical line.</p>
<p>The other continuation methods are easily explained as a logical
consequence of the semantics they provide; <tt class="docutils literal">\</tt> is simply an escape
character that needs to be memorized.</p>
</div>
<div class="section" id="existing-line-continuation-methods">
<h1><a class="toc-backref" href="#id8">Existing Line Continuation Methods</a></h1>
<div class="section" id="parenthetical-expression">
<h2><a class="toc-backref" href="#id9">Parenthetical Expression - <tt class="docutils literal"><span class="pre">([{}])</span></tt></a></h2>
<p>Open a parenthetical expression.  It doesn't matter whether people
view the &quot;line&quot; as continuing; they do immediately recognize that the
expression needs to be closed before the statement can end.</p>
<p>Examples using each of <tt class="docutils literal">()</tt>, <tt class="docutils literal">[]</tt>, and <tt class="docutils literal">{}</tt>:</p>
<pre class="literal-block">
def fn(long_argname1,
       long_argname2):
    settings = {&quot;background&quot;: &quot;random noise&quot;,
                &quot;volume&quot;: &quot;barely audible&quot;}
    restrictions = [&quot;Warrantee void if used&quot;,
                    &quot;Notice must be received by yesterday&quot;,
                    &quot;Not responsible for sales pitch&quot;]
</pre>
<p>Note that it is always possible to parenthesize an expression, but it
can seem odd to parenthesize an expression that needs parentheses only
for the line break:</p>
<pre class="literal-block">
assert val&gt;4, (
    &quot;val is too small&quot;)
</pre>
</div>
<div class="section" id="triple-quoted-strings">
<h2><a class="toc-backref" href="#id10">Triple-Quoted Strings</a></h2>
<p>Open a triple-quoted string; again, people recognize that the string
needs to finish before the next statement starts.</p>
<pre class="literal-block">
banner_message = &quot;&quot;&quot;
    Satisfaction Guaranteed,
    or DOUBLE YOUR MONEY BACK!!!





                                    some minor restrictions apply&quot;&quot;&quot;
</pre>
</div>
<div class="section" id="terminal-in-the-general-case">
<h2><a class="toc-backref" href="#id11">Terminal <tt class="docutils literal">\</tt> in the general case</a></h2>
<p>A terminal <tt class="docutils literal">\</tt> indicates that the logical line is continued on the
following physical line (after whitespace).  There are no particular
semantics associated with this.  This form is never required, although
it may look better (particularly for people with a C language
background) in some cases:</p>
<pre class="literal-block">
&gt;&gt;&gt; assert val&gt;4, \
        &quot;val is too small&quot;
</pre>
<p>Also note that the <tt class="docutils literal">\</tt> must be the final character in the line.  If
your editor navigation can add whitespace to the end of a line, that
invisible change will alter the semantics of the program.
Fortunately, the typical result is only a syntax error, rather than a
runtime bug:</p>
<pre class="literal-block">
&gt;&gt;&gt; assert val&gt;4, \
        &quot;val is too small&quot;

SyntaxError: unexpected character after line continuation character
</pre>
<p>This PEP proposes to eliminate this redundant and potentially
confusing alternative.</p>
</div>
<div class="section" id="terminal-within-a-string">
<h2><a class="toc-backref" href="#id12">Terminal <tt class="docutils literal">\</tt> within a string</a></h2>
<p>A terminal <tt class="docutils literal">\</tt> within a single-quoted string, at the end of the
line.  This is arguably a special case of the terminal <tt class="docutils literal">\</tt>, but it
is a special case that may be worth keeping.</p>
<pre class="literal-block">
&gt;&gt;&gt; &quot;abd\
 def&quot;
'abd def'
</pre>
<ul class="simple">
<li>Pro: Many of the objections to removing <tt class="docutils literal">\</tt> termination were
really just objections to removing it within literal strings;
several people clarified that they want to keep this literal-string
usage, but don't mind losing the general case.</li>
<li>Pro: The use of <tt class="docutils literal">\</tt> for an escape character within strings is well
known.</li>
<li>Contra: But note that this particular usage is odd, because the
escaped character (the newline) is invisible, and the special
treatment is to delete the character.  That said, the <tt class="docutils literal">\</tt> of
<tt class="docutils literal">\(newline)</tt> is still an escape which changes the meaning of the
following character.</li>
</ul>
</div>
</div>
<div class="section" id="alternate-proposals">
<h1><a class="toc-backref" href="#id13">Alternate Proposals</a></h1>
<p>Several people have suggested alternative ways of marking the line
end.  Most of these were rejected for not actually simplifying things.</p>
<p>The one exception was to let any unfinished expression signify a line
continuation, possibly in conjunction with increased indentation.</p>
<p>This is attractive because it is a generalization of the rule for
parentheses.</p>
<p>The initial objections to this were:</p>
<ul>
<li><p class="first">The amount of whitespace may be contentious; expression continuation
should not be confused with opening a new suite.</p>
</li>
<li><p class="first">The &quot;expression continuation&quot; markers are not as clearly marked in
Python as the grouping punctuation &quot;(), [], {}&quot; marks are:</p>
<pre class="literal-block">
# Plus needs another operand, so the line continues
&quot;abc&quot; +
    &quot;def&quot;

# String ends an expression, so the line does not
# not continue.  The next line is a syntax error because
# unary plus does not apply to strings.
&quot;abc&quot;
    + &quot;def&quot;
</pre>
</li>
<li><p class="first">Guido objected for technical reasons.  <a class="footnote-reference" href="#dedent" id="id1">[1]</a> The most obvious
implementation would require allowing INDENT or DEDENT tokens
anywhere, or at least in a widely expanded (and ill-defined) set of
locations.  While this is of concern only for the internal parsing
mechanism (rather than for users), it would be a major new source of
complexity.</p>
</li>
</ul>
<p>Andrew Koenig then pointed out <a class="footnote-reference" href="#lexical" id="id2">[2]</a> a better implementation
strategy, and said that it had worked quite well in other
languages. <a class="footnote-reference" href="#snocone" id="id3">[3]</a> The improved suggestion boiled down to:</p>
<blockquote>
<p>The whitespace that follows an (operator or) open bracket or
parenthesis can include newline characters.</p>
<p>It would be implemented at a very low lexical level -- even before
the decision is made to turn a newline followed by spaces into an
INDENT or DEDENT token.</p>
</blockquote>
<p>There is still some concern that it could mask bugs, as in this
example <a class="footnote-reference" href="#guidobughide" id="id4">[4]</a>:</p>
<pre class="literal-block">
# Used to be y+1, the 1 got dropped.  Syntax Error (today)
# would become nonsense.
x = y+
f(x)
</pre>
<p>Requiring that the continuation be indented more than the initial line
would add both safety and complexity.</p>
</div>
<div class="section" id="open-issues">
<h1><a class="toc-backref" href="#id14">Open Issues</a></h1>
<ul class="simple">
<li>Should <tt class="docutils literal">\</tt>-continuation be removed even inside strings?</li>
<li>Should the continuation markers be expanded from just ([{}]) to
include lines ending with an operator?</li>
<li>As a safety measure, should the continuation line be required to be
more indented than the initial line?</li>
</ul>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id15">References</a></h1>
<table class="docutils footnote" frame="void" id="dedent" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>(email subject) PEP 30XZ: Simplified Parsing, van Rossum
<a class="reference external" href="https://mail.python.org/pipermail/python-3000/2007-April/007063.html">https://mail.python.org/pipermail/python-3000/2007-April/007063.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="lexical" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>(email subject) PEP-3125 -- remove backslash
continuation, Koenig
<a class="reference external" href="https://mail.python.org/pipermail/python-3000/2007-May/007237.html">https://mail.python.org/pipermail/python-3000/2007-May/007237.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="snocone" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>The Snocone Programming Language, Koenig
<a class="reference external" href="http://www.snobol4.com/report.htm">http://www.snobol4.com/report.htm</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="guidobughide" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td>(email subject) PEP-3125 -- remove backslash
continuation, van Rossum
<a class="reference external" href="https://mail.python.org/pipermail/python-3000/2007-May/007244.html">https://mail.python.org/pipermail/python-3000/2007-May/007244.html</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id16">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>


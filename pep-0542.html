<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">542</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Dot Notation Assignment In Function Header</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0542.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Markus Meskanen &lt;markusmeskanen&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">10-February-2017</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#rationale" id="id3">Rationale</a></li>
<li><a class="reference internal" href="#implementation" id="id4">Implementation</a></li>
<li><a class="reference internal" href="#backwards-compatibility" id="id5">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#copyright" id="id6">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p>Function definitions only allow simple function names to be used,
even though functions are assignable first class objects.</p>
<p>This PEP proposes adding support for assigning a function to
a class or instance attribute directly in the function
definition's header by using the dot notation to separate
the object from the function's name.</p>
<p>Although a similar feature, this PEP does not address general
assignment to anything that supports assignment, such as dict keys
and list indexes.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id3">Rationale</a></h1>
<p>Currently if a function needs to be assigned to a class or instance
attribute, it requires an additional assignment statement to be made:</p>
<pre class="literal-block">
class MyClass:
    ...

my_instance = MyClass()

def my_function(self):
    ...

# Assign to class attribute
MyClass.my_function = my_function

# Or assign to instance attribtue
my_instance.my_function = my_function
</pre>
<p>While this isn't usually an inconvenience, using dot notation to
assign directly in the function's header would greatly simplify this:</p>
<pre class="literal-block">
class MyClass:
    ...

my_instance = MyClass()

# Assign to class attribute
def MyClass.my_function(self):
    ...

# Or assign to instance attribute
def my_instance.my_function(self):
    ...
</pre>
<p>There are multiple reasons to use this functionality over
a standard class method, for example when the class is referenced
inside the function's header (such as with decorators and typing).
This is also useful when an instance requires a callback attribute:</p>
<pre class="literal-block">
class Menu:
    def __init__(self, items=None, select_callback=None):
        self.items = items if items is not None else []
        self.select_callback = select_callback

my_menu = Menu([item1, item2])

def my_menu.select_callback(item_index, menu):
    print(menu.items[item_index])
</pre>
<p>As opposed to:</p>
<pre class="literal-block">
my_menu = Menu([item1, item2])

def select_callback(item_index, menu):
    print(menu.items[item_index])
my_menu.select_callback = select_callback
</pre>
<p>Or defining them in an &quot;unnatural&quot; order:</p>
<pre class="literal-block">
def select_callback(item_index, menu):
    print(menu.items[item_index])

my_menu = Menu([item1, item2], select_callback)
</pre>
<p>It reads better than the &quot;unnatural&quot; way, since you already know at
the time of the function definition what it's goig to be used for.
It also saves one line of code while removing visual complexity.</p>
<p>The feature would also avoid leaving the function's name into
the global namespace:</p>
<pre class="literal-block">
eggs = 'something'

def Spam.eggs(self):
    ...

def Cheese.eggs(self):
    ...

assert eggs == 'something'
</pre>
<p>Ideally this would be just syntastic sugar:</p>
<pre class="literal-block">
def x.y():
    ...

# Equals to

def y():
    ...
x.y = y
</pre>
<p>Similar to how decorators are syntastic sugar:</p>
<pre class="literal-block">
&#64;decorate
def f():
    ...

# Equals to

def f():
    ...
f = decorate(f)
</pre>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id4">Implementation</a></h1>
<p>The <cite>__name__</cite> would follow the principles of a normal function:</p>
<pre class="literal-block">
class MyClass:
    def my_function1(self):
        ...

def MyClass.my_function2(self):
    ...

assert my_function1.__name__ == 'my_function1'
assert my_function2.__name__ == 'my_function2'
</pre>
<p>The grammar would use <cite>dotted_name</cite> to support chaining of attributes:</p>
<pre class="literal-block">
def Person.name.fset(self, value):
    self._name = value
</pre>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id5">Backwards Compatibility</a></h1>
<p>This PEP is fully backwards compatible.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id6">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
</div>


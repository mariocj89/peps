<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">321</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Date/Time Parsing and Formatting</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0321.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">A.M. Kuchling &lt;amk&#32;&#97;t&#32;amk.ca&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Withdrawn</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">16-Sep-2003</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.4</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id11">Abstract</a></li>
<li><a class="reference internal" href="#input-formats" id="id12">Input Formats</a></li>
<li><a class="reference internal" href="#generic-input-parsing" id="id13">Generic Input Parsing</a></li>
<li><a class="reference internal" href="#output-formats" id="id14">Output Formats</a></li>
<li><a class="reference internal" href="#references" id="id15">References</a></li>
<li><a class="reference internal" href="#copyright" id="id16">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id11">Abstract</a></h1>
<p>Python 2.3 added a number of simple date and time types in the
<tt class="docutils literal">datetime</tt> module.  There's no support for parsing strings in various
formats and returning a corresponding instance of one of the types.
This PEP proposes adding a family of predefined parsing function for
several commonly used date and time formats, and a facility for generic
parsing.</p>
<p>The types provided by the <tt class="docutils literal">datetime</tt> module all have
<tt class="docutils literal">.isoformat()</tt> and <tt class="docutils literal">.ctime()</tt> methods that return string
representations of a time, and the <tt class="docutils literal">.strftime()</tt> method can be used
to construct new formats.  There are a number of additional
commonly-used formats that would be useful to have as part of the
standard library; this PEP also suggests how to add them.</p>
</div>
<div class="section" id="input-formats">
<h1><a class="toc-backref" href="#id12">Input Formats</a></h1>
<p>Useful formats to support include:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html">ISO8601</a> <a class="footnote-reference" href="#id3" id="id4">[2]</a></li>
<li>ARPA/<a class="reference external" href="http://rfc2822.x42.com">RFC2822</a> <a class="footnote-reference" href="#id1" id="id2">[1]</a></li>
<li><a class="reference external" href="http://www.opengroup.org/onlinepubs/007908799/xsh/asctime.html">ctime</a> <a class="footnote-reference" href="#id7" id="id8">[4]</a></li>
<li>Formats commonly written by humans such as the American
&quot;MM/DD/YYYY&quot;, the European &quot;YYYY/MM/DD&quot;, and variants such as
&quot;DD-Month-YYYY&quot;.</li>
<li>CVS-style or tar-style dates (&quot;tomorrow&quot;, &quot;12 hours ago&quot;, etc.)</li>
</ul>
<p>XXX The Perl <a class="reference external" href="http://search.cpan.org/author/MUIR/Time-modules-2003.0211/lib/Time/ParseDate.pm">ParseDate.pm</a> <a class="footnote-reference" href="#id5" id="id6">[3]</a> module supports many different input formats,
both absolute and relative.  Should we try to support them all?</p>
<p>Options:</p>
<ol class="arabic">
<li><p class="first">Add functions to the <tt class="docutils literal">datetime</tt> module:</p>
<pre class="literal-block">
import datetime
d = datetime.parse_iso8601(&quot;2003-09-15T10:34:54&quot;)
</pre>
</li>
<li><p class="first">Add class methods to the various types.  There are already various
class methods such as <tt class="docutils literal">.now()</tt>, so this would be pretty natural.:</p>
<pre class="literal-block">
import datetime
d = datetime.date.parse_iso8601(&quot;2003-09-15T10:34:54&quot;)
</pre>
</li>
<li><p class="first">Add a separate module (possible names: date, date_parse, parse_date)
or subpackage (possible names: datetime.parser) containing parsing
functions:</p>
<pre class="literal-block">
import datetime
d = datetime.parser.parse_iso8601(&quot;2003-09-15T10:34:54&quot;)
</pre>
</li>
</ol>
<p>Unresolved questions:</p>
<ul class="simple">
<li>Naming convention to use.</li>
<li>What exception to raise on errors?  ValueError, or a specialized exception?</li>
<li>Should you know what type you're expecting, or should the parsing figure
it out?  (e.g. <tt class="docutils literal"><span class="pre">parse_iso8601(&quot;yyyy-mm-dd&quot;)</span></tt> returns a <tt class="docutils literal">date</tt> instance,
but parsing &quot;yyyy-mm-ddThh:mm:ss&quot; returns a <tt class="docutils literal">datetime</tt>.)  Should
there be an option to signal an error if a time is provided where
none is expected, or if no time is provided?</li>
<li>Anything special required for I18N?  For time zones?</li>
</ul>
</div>
<div class="section" id="generic-input-parsing">
<h1><a class="toc-backref" href="#id13">Generic Input Parsing</a></h1>
<p>Is a strptime() implementation that returns <tt class="docutils literal">datetime</tt> types sufficient?</p>
<p>XXX if yes, describe strptime here.  Can the existing pure-Python
implementation be easily retargeted?</p>
</div>
<div class="section" id="output-formats">
<h1><a class="toc-backref" href="#id14">Output Formats</a></h1>
<p>Not all input formats need to be supported as output formats, because it's
pretty trivial to get the <tt class="docutils literal">strftime()</tt> argument right for simple things
such as YYYY/MM/DD.   Only complicated formats need to be supported; <a class="reference external" href="http://tools.ietf.org/html/rfc2822.html">RFC2822</a>
is currently the only one I can think of.</p>
<p>Options:</p>
<ol class="arabic">
<li><p class="first">Provide predefined format strings, so you could write this:</p>
<pre class="literal-block">
import datetime
d = datetime.datetime(...)
print d.strftime(d.RFC2822_FORMAT) # or datetime.RFC2822_FORMAT?
</pre>
</li>
<li><p class="first">Provide new methods on all the objects:</p>
<pre class="literal-block">
d = datetime.datetime(...)
print d.rfc822_time()
</pre>
</li>
</ol>
<p>Relevant functionality in other languages includes the <a class="reference external" href="http://www.php.net/date">PHP date</a> <a class="footnote-reference" href="#id9" id="id10">[5]</a>
function (Python implementation by Simon Willison at
<a class="reference external" href="http://simon.incutio.com/archive/2003/10/07/dateInPython">http://simon.incutio.com/archive/2003/10/07/dateInPython</a>)</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id15">References</a></h1>
<p>Other useful links:</p>
<p><a class="reference external" href="http://www.egenix.com/files/python/mxDateTime.html">http://www.egenix.com/files/python/mxDateTime.html</a>
<a class="reference external" href="http://ringmaster.arc.nasa.gov/tools/time_formats.html">http://ringmaster.arc.nasa.gov/tools/time_formats.html</a>
<a class="reference external" href="http://www.thinkage.ca/english/gcos/expl/b/lib/0tosec.html">http://www.thinkage.ca/english/gcos/expl/b/lib/0tosec.html</a>
<a class="reference external" href="https://moin.conectiva.com.br/DateUtil">https://moin.conectiva.com.br/DateUtil</a></p>
<table class="docutils footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><a class="reference external" href="http://rfc2822.x42.com">http://rfc2822.x42.com</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[2]</a></td><td><a class="reference external" href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html">http://www.cl.cam.ac.uk/~mgk25/iso-time.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[3]</a></td><td><a class="reference external" href="http://search.cpan.org/author/MUIR/Time-modules-2003.0211/lib/Time/ParseDate.pm">http://search.cpan.org/author/MUIR/Time-modules-2003.0211/lib/Time/ParseDate.pm</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[4]</a></td><td><a class="reference external" href="http://www.opengroup.org/onlinepubs/007908799/xsh/asctime.html">http://www.opengroup.org/onlinepubs/007908799/xsh/asctime.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[5]</a></td><td><a class="reference external" href="http://www.php.net/date">http://www.php.net/date</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id16">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
End: -->
</div>


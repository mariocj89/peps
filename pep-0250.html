<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">250</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Using site-packages on Windows</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0250.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">p.f.moore&#32;&#97;t&#32;gmail.com (Paul Moore)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">30-Mar-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.2</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">30-Mar-2001</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#motivation" id="id3">Motivation</a></li>
<li><a class="reference internal" href="#implementation" id="id4">Implementation</a></li>
<li><a class="reference internal" href="#notes" id="id5">Notes</a></li>
<li><a class="reference internal" href="#open-issues" id="id6">Open Issues</a></li>
<li><a class="reference internal" href="#copyright" id="id7">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p>The standard Python distribution includes a directory
<tt class="docutils literal"><span class="pre">Lib/site-packages</span></tt>, which is used on Unix platforms to hold
locally-installed modules and packages.  The <tt class="docutils literal">site.py</tt> module
distributed with Python includes support for locating other
modules in the site-packages directory.</p>
<p>This PEP proposes that the site-packages directory should be used
on the Windows platform in a similar manner.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id3">Motivation</a></h1>
<p>On Windows platforms, the default setting for <tt class="docutils literal">sys.path</tt> does not
include a directory suitable for users to install locally
developed modules.  The &quot;expected&quot; location appears to be the
directory containing the Python executable itself.  This is also
the location where distutils (and distutils-generated installers)
installs packages.  Including locally developed code in the same
directory as installed executables is not good practice.</p>
<p>Clearly, users can manipulate <tt class="docutils literal">sys.path</tt>, either in a locally
modified <tt class="docutils literal">site.py</tt>, or in a suitable <tt class="docutils literal">sitecustomize.py</tt>, or even via
<tt class="docutils literal">.pth</tt> files.  However, there should be a standard location for such
files, rather than relying on every individual site having to set
their own policy.</p>
<p>In addition, with distutils becoming more prevalent as a means of
distributing modules, the need for a standard install location for
distributed modules will become more common.  It would be better
to define such a standard now, rather than later when more
distutils-based packages exist which will need rebuilding.</p>
<p>It is relevant to note that prior to Python 2.1, the site-packages
directory was not included in <tt class="docutils literal">sys.path</tt> for Macintosh platforms.
This has been changed in 2.1, and Macintosh includes <tt class="docutils literal">sys.path</tt> now,
leaving Windows as the only major platform with no site-specific
modules directory.</p>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id4">Implementation</a></h1>
<p>The implementation of this feature is fairly trivial.  All that
would be required is a change to <tt class="docutils literal">site.py</tt>, to change the section
setting sitedirs.  The Python 2.1 version has:</p>
<pre class="literal-block">
if os.sep == '/':
    sitedirs = [makepath(prefix,
                        &quot;lib&quot;,
                        &quot;python&quot; + sys.version[:3],
                        &quot;site-packages&quot;),
                makepath(prefix, &quot;lib&quot;, &quot;site-python&quot;)]
elif os.sep == ':':
    sitedirs = [makepath(prefix, &quot;lib&quot;, &quot;site-packages&quot;)]
else:
    sitedirs = [prefix]
</pre>
<p>A suitable change would be to simply replace the last 4 lines with:</p>
<pre class="literal-block">
else:
    sitedirs == [prefix, makepath(prefix, &quot;lib&quot;, &quot;site-packages&quot;)]
</pre>
<p>Changes would also be required to distutils, to reflect this change
in policy. A patch is available on Sourceforge, patch ID 445744,
which implements this change.  Note that the patch checks the Python
version and only invokes the new behaviour for Python versions from
2.2 onwards. This is to ensure that distutils remains compatible
with earlier versions of Python.</p>
<p>Finally, the executable code which implements the Windows installer
used by the <tt class="docutils literal">bdist_wininst</tt> command will need changing to use the new
location.  A separate patch is available for this, currently
maintained by Thomas Heller.</p>
</div>
<div class="section" id="notes">
<h1><a class="toc-backref" href="#id5">Notes</a></h1>
<ul class="simple">
<li>This change does not preclude packages using the current
location -- the change only adds a directory to <tt class="docutils literal">sys.path</tt>, it
does not remove anything.</li>
<li>Both the current location (<tt class="docutils literal">sys.prefix</tt>) and the new directory
(site-packages) are included in sitedirs, so that <tt class="docutils literal">.pth</tt> files
will be recognised in either location.</li>
<li>This proposal adds a single additional site-packages directory
to sitedirs. On Unix platforms, two directories are added, one
for version-independent files (Python code) and one for
version-dependent code (C extensions). This is necessary on
Unix, as the sitedirs include a common (across Python versions)
package location, in <tt class="docutils literal">/usr/local</tt> by default. As there is no such
common location available on Windows, there is also no need for
having two separate package directories.</li>
<li>If users want to keep DLLs in a single location on Windows, rather
than keeping them in the package directory, the DLLs subdirectory
of the Python install directory is already available for that
purpose. Adding an extra directory solely for DLLs should not be
necessary.</li>
</ul>
</div>
<div class="section" id="open-issues">
<h1><a class="toc-backref" href="#id6">Open Issues</a></h1>
<ul class="simple">
<li>Comments from Unix users indicate that there may be issues with
the current setup on the Unix platform.  Rather than become
involved in cross-platform issues, this PEP specifically limits
itself to the Windows platform, leaving changes for other platforms
to be covered in other PEPs.</li>
<li>There could be issues with applications which embed Python. To the
author's knowledge, there should be no problem as a result of this
change. There have been no comments (supportive or otherwise) from
users who embed Python.</li>
</ul>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id7">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


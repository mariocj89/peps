<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">260</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Simplify xrange()</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0260.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">guido&#32;&#97;t&#32;python.org (Guido van Rossum)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">26-Jun-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.2</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">26-Jun-2001</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#problem" id="id3">Problem</a></li>
<li><a class="reference internal" href="#proposed-solution" id="id4">Proposed Solution</a></li>
<li><a class="reference internal" href="#scope" id="id5">Scope</a></li>
<li><a class="reference internal" href="#risks" id="id6">Risks</a></li>
<li><a class="reference internal" href="#transition" id="id7">Transition</a></li>
<li><a class="reference internal" href="#copyright" id="id8">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p>This PEP proposes to strip the <tt class="docutils literal">xrange()</tt> object from some rarely
used behavior like <tt class="docutils literal">x[i:j]</tt> and <tt class="docutils literal">x*n</tt>.</p>
</div>
<div class="section" id="problem">
<h1><a class="toc-backref" href="#id3">Problem</a></h1>
<p>The <tt class="docutils literal">xrange()</tt> function has one idiomatic use:</p>
<pre class="literal-block">
for i in xrange(...): ...
</pre>
<p>However, the <tt class="docutils literal">xrange()</tt> object has a bunch of rarely used behaviors
that attempt to make it more sequence-like.  These are so rarely
used that historically they have has serious bugs (e.g. off-by-one
errors) that went undetected for several releases.</p>
<p>I claim that it's better to drop these unused features.  This will
simplify the implementation, testing, and documentation, and
reduce maintenance and code size.</p>
</div>
<div class="section" id="proposed-solution">
<h1><a class="toc-backref" href="#id4">Proposed Solution</a></h1>
<p>I propose to strip the <tt class="docutils literal">xrange()</tt> object to the bare minimum.  The
only retained sequence behaviors are <tt class="docutils literal">x[i]</tt>, <tt class="docutils literal">len(x)</tt>, and <tt class="docutils literal">repr(x)</tt>.
In particular, these behaviors will be dropped:</p>
<ul class="simple">
<li><tt class="docutils literal">x[i:j]</tt> (slicing)</li>
<li><tt class="docutils literal">x*n</tt>, <tt class="docutils literal">n*x</tt> (sequence-repeat)</li>
<li><tt class="docutils literal">cmp(x1, x2)</tt> (comparisons)</li>
<li><tt class="docutils literal">i in x</tt> (containment test)</li>
<li><tt class="docutils literal">x.tolist()</tt> method</li>
<li><tt class="docutils literal">x.start</tt>, <tt class="docutils literal">x.stop</tt>, <tt class="docutils literal">x.step</tt> attributes</li>
</ul>
<p>I also propose to change the signature of the <tt class="docutils literal">PyRange_New()</tt> C API
to remove the 4th argument (the repetition count).</p>
<p>By implementing a custom iterator type, we could speed up the
common use, but this is optional (the default sequence iterator
does just fine).</p>
</div>
<div class="section" id="scope">
<h1><a class="toc-backref" href="#id5">Scope</a></h1>
<p>This PEP affects the <tt class="docutils literal">xrange()</tt> built-in function and the
<tt class="docutils literal">PyRange_New()</tt> C API.</p>
</div>
<div class="section" id="risks">
<h1><a class="toc-backref" href="#id6">Risks</a></h1>
<p>Somebody's code could be relying on the extended code, and this
code would break.  However, given that historically bugs in the
extended code have gone undetected for so long, it's unlikely that
much code is affected.</p>
</div>
<div class="section" id="transition">
<h1><a class="toc-backref" href="#id7">Transition</a></h1>
<p>For backwards compatibility, the existing functionality will still
be present in Python 2.2, but will trigger a warning.  A year
after Python 2.2 final is released (probably in 2.4) the
functionality will be ripped out.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id8">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


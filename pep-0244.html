<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">244</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">The <tt class="docutils literal">directive</tt> statement</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0244.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">martin&#32;&#97;t&#32;v.loewis.de (Martin von LÃ¶wis)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Rejected</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">20-Mar-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.1</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#motivation" id="id11">Motivation</a></li>
<li><a class="reference internal" href="#syntax" id="id12">Syntax</a></li>
<li><a class="reference internal" href="#semantics" id="id13">Semantics</a></li>
<li><a class="reference internal" href="#specific-directives-transitional" id="id14">Specific Directives: transitional</a></li>
<li><a class="reference internal" href="#backwards-compatibility" id="id15">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#unresolved-problems-directive-as-the-first-identifier" id="id16">Unresolved Problems:  directive as the first identifier</a></li>
<li><a class="reference internal" href="#questions-and-answers" id="id17">Questions and Answers</a></li>
<li><a class="reference internal" href="#references-and-footnotes" id="id18">References and Footnotes</a></li>
<li><a class="reference internal" href="#copyright" id="id19">Copyright</a></li>
</ul>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id11">Motivation</a></h1>
<p>From time to time, Python makes an incompatible change to the
advertised semantics of core language constructs, or changes their
accidental (implementation-dependent) behavior in some way.  While
this is never done capriciously, and is always done with the aim
of improving the language over the long term, over the short term
it's contentious and disrupting.</p>
<p><a class="reference external" href="/dev/peps/pep-0001">PEP 1</a>, Guidelines for Language Evolution <a class="footnote-reference" href="#id8" id="id1">[1]</a> suggests ways to ease
the pain, and this PEP introduces some machinery in support of
that.</p>
<p><a class="reference external" href="/dev/peps/pep-0002">PEP 2</a>, Statically Nested Scopes <a class="footnote-reference" href="#id9" id="id2">[2]</a> is the first application, and
will be used as an example here.</p>
<p>When a new, potentially incompatible language feature is added,
some modules and libraries may chose to use it, while others may
not.  This specification introduces a syntax where a module author
can denote whether a certain language feature is used in the
module or not.</p>
<p>In discussion of this PEP, readers commented that there are two
kinds of &quot;settable&quot; language features:</p>
<ul class="simple">
<li>those that are designed to eventually become the only option, at
which time specifying use of them is not necessary anymore.  The
features for which the syntax of the &quot;Back to the <tt class="docutils literal">__future__</tt>&quot;
<a class="reference external" href="/dev/peps/pep-0236">PEP 236</a>, Back to the <tt class="docutils literal">__future__</tt> <a class="footnote-reference" href="#id10" id="id3">[3]</a> was proposed fall into this
category.  This PEP supports declaring such features, and
supports phasing out the &quot;old&quot; meaning of constructs whose
semantics has changed under the new feature.  However, it
defines no policy as to what features must be phased out
eventually.</li>
<li>those which are designed to stay optional forever, e.g. if they
change some default setting in the interpreter.  An example for
such settings might be the request to always emit line-number
instructions for a certain module; no specific flags of that
kind are proposed in this specification.</li>
</ul>
<p>Since a primary goal of this PEP is to support new language
constructs without immediately breaking old libraries, special
care was taken not to break old libraries by introducing the new
syntax.</p>
</div>
<div class="section" id="syntax">
<h1><a class="toc-backref" href="#id12">Syntax</a></h1>
<p>A directive_statement is a statement of the form:</p>
<pre class="literal-block">
directive_statement: 'directive' ``NAME`` [atom] [';'] NEWLINE
</pre>
<p>The name in the directive indicates the kind of the directive; it
defines whether the optional atom can be present, and whether
there are further syntactical or semantical restrictions to the
atom.  In addition, depending on the name of the directive,
certain additional syntactical or semantical restrictions may be
placed on the directive (e.g. placement of the directive in the
module may be restricted to the top of the module).</p>
<p>In the directive_statement, <tt class="docutils literal">directive</tt> is a new
keyword. According to <a class="footnote-reference" href="#id8" id="id4">[1]</a>, this keyword is initially considered as
a keyword only when used in a directive statement, see &quot;Backwards
Compatibility&quot; below.</p>
</div>
<div class="section" id="semantics">
<h1><a class="toc-backref" href="#id13">Semantics</a></h1>
<p>A directive statement instructs the Python interpreter to process
a source file in a different way; the specific details of that
processing depend on the directive name.  The optional atom is
typically interpreted when the source code is processed; details
of that interpretation depend on the directive.</p>
</div>
<div class="section" id="specific-directives-transitional">
<h1><a class="toc-backref" href="#id14">Specific Directives: transitional</a></h1>
<p>If a syntactical or semantical change is added to Python which is
incompatible, <a class="footnote-reference" href="#id8" id="id5">[1]</a> mandates a transitional evolution of the
language, where the new feature is initially available alongside
with the old one.  Such a transition is possible by means of the
transitional directive.</p>
<p>In a transitional directive, the <tt class="docutils literal">NAME</tt> is 'transitional'. The atom
MUST be present, and it MUST be a <tt class="docutils literal">NAME</tt>.  The possible values for
that name are defined when the language change is defined.  One
example for such a directive is:</p>
<pre class="literal-block">
directive transitional nested_scopes
</pre>
<p>The transitional directive MUST occur at before any other
statement in a module, except for the documentation string
(i.e. it may appear as the second statement of a module only if
the first statement is a <tt class="docutils literal">STRING+</tt>).</p>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id15">Backwards Compatibility</a></h1>
<p>Introducing <tt class="docutils literal">directive</tt> as a new keyword might cause
incompatibilities with existing code.  Following the guideline in
<a class="footnote-reference" href="#id8" id="id6">[1]</a>, in the initial implementation of this specification,
directive is a new keyword only if it was used in a valid
directive_statement (i.e. if it appeared as the first non-string
token in a module).</p>
</div>
<div class="section" id="unresolved-problems-directive-as-the-first-identifier">
<h1><a class="toc-backref" href="#id16">Unresolved Problems:  directive as the first identifier</a></h1>
<p>Using directive in a module as:</p>
<pre class="literal-block">
directive = 1
</pre>
<p>(i.e. the name directive appears as the first thing in a module)
will treat it as keyword, not as identifier. It would be possible
to classify it as a <tt class="docutils literal">NAME</tt> with an additional look-ahead token, but
such look-ahead is not available in the Python tokenizer.</p>
</div>
<div class="section" id="questions-and-answers">
<h1><a class="toc-backref" href="#id17">Questions and Answers</a></h1>
<p><strong>Q:</strong> It looks like this PEP was written to allow definition of source
code character sets.  Is that true?</p>
<p><strong>A:</strong> No.  Even though the directive facility can be extended to
allow source code encodings, no specific directive is proposed.</p>
<p><strong>Q:</strong> Then why was this PEP written at all?</p>
<p><strong>A:</strong> It acts as a counter-proposal to <a class="footnote-reference" href="#id10" id="id7">[3]</a>, which proposes to
overload the import statement with a new meaning.  This PEP
allows to solve the problem in a more general way.</p>
<p><strong>Q:</strong> But isn't mixing source encodings and language changes like
mixing apples and oranges?</p>
<p><strong>A:</strong> Perhaps.  To address the difference, the predefined
&quot;transitional&quot; directive has been defined.</p>
</div>
<div class="section" id="references-and-footnotes">
<h1><a class="toc-backref" href="#id18">References and Footnotes</a></h1>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id4">2</a>, <a class="fn-backref" href="#id5">3</a>, <a class="fn-backref" href="#id6">4</a>)</em> <a class="reference external" href="/dev/peps/pep-0005">PEP 5</a>, Guidelines for Language Evolution, Prescod
<a class="reference external" href="http://www.python.org/dev/peps/pep-0005/">http://www.python.org/dev/peps/pep-0005/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="/dev/peps/pep-0227">PEP 227</a>, Statically Nested Scopes, Hylton
<a class="reference external" href="http://www.python.org/dev/peps/pep-0227/">http://www.python.org/dev/peps/pep-0227/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id7">2</a>)</em> <a class="reference external" href="/dev/peps/pep-0236">PEP 236</a>, Back to the <tt class="docutils literal">__future__</tt>, Peters
<a class="reference external" href="http://www.python.org/dev/peps/pep-0236/">http://www.python.org/dev/peps/pep-0236/</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id19">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


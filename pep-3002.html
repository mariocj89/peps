<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3002</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Procedure for Backwards-Incompatible Changes</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-3002.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Steven Bethard &lt;steven.bethard&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Process</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">27-Mar-2006</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">27-Mar-2006, 13-Apr-2006</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id1">Abstract</a></li>
<li><a class="reference internal" href="#rationale" id="id2">Rationale</a></li>
<li><a class="reference internal" href="#python-enhancement-proposals" id="id3">Python Enhancement Proposals</a></li>
<li><a class="reference internal" href="#identifying-problematic-code" id="id4">Identifying Problematic Code</a></li>
<li><a class="reference internal" href="#references" id="id5">References</a></li>
<li><a class="reference internal" href="#copyright" id="id6">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id1">Abstract</a></h1>
<p>This PEP describes the procedure for changes to Python that are
backwards-incompatible between the Python 2.X series and Python 3000.
All such changes must be documented by an appropriate Python 3000 PEP
and must be accompanied by code that can identify when pieces of
Python 2.X code may be problematic in Python 3000.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id2">Rationale</a></h1>
<p>Python 3000 will introduce a number of backwards-incompatible changes
to Python, mainly to streamline the language and to remove some
previous design mistakes.  But Python 3000 is not intended to be a new
and completely different language from the Python 2.X series, and it
is expected that much of the Python user community will make the
transition to Python 3000 when it becomes available.</p>
<p>To encourage this transition, it is crucial to provide a clear and
complete guide on how to upgrade Python 2.X code to Python 3000 code.
Thus, for any backwards-incompatible change, two things are required:</p>
<ul class="simple">
<li>An official Python Enhancement Proposal (PEP)</li>
<li>Code that can identify pieces of Python 2.X code that may be
problematic in Python 3000</li>
</ul>
</div>
<div class="section" id="python-enhancement-proposals">
<h1><a class="toc-backref" href="#id3">Python Enhancement Proposals</a></h1>
<p>Every backwards-incompatible change must be accompanied by a PEP.
This PEP should follow the usual PEP guidelines and explain the
purpose and reasoning behind the backwards incompatible change.  In
addition to the usual PEP sections, all PEPs proposing
backwards-incompatible changes must include an additional section:
Compatibility Issues.  This section should describe what is backwards
incompatible about the proposed change to Python, and the major sorts
of breakage to be expected.</p>
<p>While PEPs must still be evaluated on a case-by-case basis, a PEP may
be inappropriate for Python 3000 if its Compatibility Issues section
implies any of the following:</p>
<ul>
<li><p class="first">Most or all instances of a Python 2.X construct are incorrect in
Python 3000, and most or all instances of the Python 3000 construct
are incorrect in Python 2.X.</p>
<p>So for example, changing the meaning of the for-loop else-clause
from &quot;executed when the loop was not broken out of&quot; to &quot;executed
when the loop had zero iterations&quot; would mean that all Python 2.X
for-loop else-clauses would be broken, and there would be no way to
use a for-loop else-clause in a Python-3000-appropriate manner.
Thus a PEP for such an idea would likely be rejected.</p>
</li>
<li><p class="first">Many instances of a Python 2.X construct are incorrect in Python
3000 and the PEP fails to demonstrate real-world use-cases for the
changes.</p>
<p>Backwards incompatible changes are allowed in Python 3000, but not
to excess.  A PEP that proposes backwards-incompatible changes
should provide good examples of code that visibly benefits from the
changes.</p>
</li>
</ul>
<p>PEP-writing is time-consuming, so when a number of
backwards-incompatible changes are closely related, they should be
proposed in the same PEP.  Such PEPs will likely have longer
Compatibility Issues sections, however, since they must now describe
the sorts of breakage expected from <em>all</em> the proposed changes.</p>
</div>
<div class="section" id="identifying-problematic-code">
<h1><a class="toc-backref" href="#id4">Identifying Problematic Code</a></h1>
<p>In addition to the PEP requirement, backwards incompatible changes to
Python must also be accompanied by code to issue warnings for pieces
of Python 2.X code that will behave differently in Python 3000. Such
warnings will be enabled in Python 2.X using a new command-line
switch: -3. All backwards incompatible changes should be
accompanied by a patch for Python 2.X that, when -3 is
specified, issues warnings for each construct that is being changed.</p>
<p>For example, if <tt class="docutils literal">dict.keys()</tt> returns an iterator in Python 3000,
the patch to the Python 2.X branch should do something like:</p>
<blockquote>
If -3 was specified, change <tt class="docutils literal">dict.keys()</tt> to return a
subclass of <tt class="docutils literal">list</tt> that issues warnings whenever you use any
methods other than <tt class="docutils literal">__iter__()</tt>.</blockquote>
<p>Such a patch would mean that warnings are only issued when features
that will not be present in Python 3000 are used, and almost all
existing code should continue to work. (Code that relies on
<tt class="docutils literal">dict.keys()</tt> always returning a <tt class="docutils literal">list</tt> and not a subclass should
be pretty much non-existent.)</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id5">References</a></h1>
<p>TBD</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id6">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>


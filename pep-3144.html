<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">3144</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">IP Address Manipulation Library for the Python Standard Library</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-3144.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Peter Moody &lt;pmoody&#32;&#97;t&#32;google.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">BDFL-Delegate:</th><td class="field-body">Nick Coghlan</td>
</tr>
<tr class="field"><th class="field-name">Discussions-To:</th><td class="field-body">&lt;<a class="reference external" href="mailto:ipaddr-py-dev&#64;googlegroups.com?subject=PEP%203144">ipaddr-py-dev&#32;&#97;t&#32;googlegroups.com</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">6-Feb-2012</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">3.3</td>
</tr>
<tr class="field"><th class="field-name">Resolution:</th><td class="field-body"><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-May/119474.html">https://mail.python.org/pipermail/python-dev/2012-May/119474.html</a></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id3">Abstract</a></li>
<li><a class="reference internal" href="#pep-acceptance" id="id4">PEP Acceptance</a></li>
<li><a class="reference internal" href="#motivation" id="id5">Motivation</a></li>
<li><a class="reference internal" href="#rationale" id="id6">Rationale</a></li>
<li><a class="reference internal" href="#background" id="id7">Background</a></li>
<li><a class="reference internal" href="#specification" id="id8">Specification</a></li>
<li><a class="reference internal" href="#reference-implementation" id="id9">Reference Implementation</a></li>
<li><a class="reference internal" href="#references" id="id10">References</a></li>
<li><a class="reference internal" href="#copyright" id="id11">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id3">Abstract</a></h1>
<p>This PEP proposes a design and for an IP address manipulation module for
python.</p>
</div>
<div class="section" id="pep-acceptance">
<h1><a class="toc-backref" href="#id4">PEP Acceptance</a></h1>
<p>This PEP was accepted by Nick Coghlan on the 15th of May, 2012.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id5">Motivation</a></h1>
<p>Several very good IP address modules for python already exist.
The truth is that all of them struggle with the balance between
adherence to Pythonic principals and the shorthand upon which
network engineers and administrators rely.  <tt class="docutils literal">ipaddress</tt> aims to
strike the right balance.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id6">Rationale</a></h1>
<p>The existence of several Python IP address manipulation modules is
evidence of an outstanding need for the functionality this module
seeks to provide.</p>
</div>
<div class="section" id="background">
<h1><a class="toc-backref" href="#id7">Background</a></h1>
<p><a class="reference external" href="/dev/peps/pep-3144">PEP 3144</a> and <tt class="docutils literal">ipaddr</tt> have been up for inclusion before.  The
version of the library specified here is backwards incompatible
with the version on PyPI and the one which was discussed before.
In order to avoid confusing users of the current <tt class="docutils literal">ipaddr</tt>, I've
renamed this version of the library <tt class="docutils literal">ipaddress</tt>.</p>
<p>The main differences between ipaddr and ipaddress are:</p>
<ul class="simple">
<li><tt class="docutils literal">ipaddress</tt> *Network classes are equivalent to the <tt class="docutils literal">ipaddr</tt> *Network
class counterparts with the <tt class="docutils literal">strict</tt> flag set to <tt class="docutils literal">True</tt>.</li>
<li><tt class="docutils literal">ipaddress</tt> *Interface classes are equivalent to the <tt class="docutils literal">ipaddr</tt>
*Network class counterparts with the <tt class="docutils literal">strict</tt> flag set to <tt class="docutils literal">False</tt>.</li>
<li>The factory functions in <tt class="docutils literal">ipaddress</tt> were renamed to disambiguate
them from classes.</li>
<li>A few attributes were renamed to disambiguate their purpose as
well. (eg. <tt class="docutils literal">network</tt>, <tt class="docutils literal">network_address</tt>)</li>
<li>A number of methods and functions which returned containers in <tt class="docutils literal">ipaddr</tt> now
return iterators. This includes <tt class="docutils literal">subnets</tt>, <tt class="docutils literal">address_exclude</tt>,
<tt class="docutils literal">summarize_address_range</tt> and <tt class="docutils literal">collapse_address_list</tt>.</li>
</ul>
<p>Due to the backwards incompatible API changes between <tt class="docutils literal">ipaddress</tt> and <tt class="docutils literal">ipaddr</tt>,
the proposal is to add the module using the new provisional API status:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.python.org/dev/glossary.html#term-provisional-package">http://docs.python.org/dev/glossary.html#term-provisional-package</a></li>
</ul>
<p>Relevant messages on python-dev:</p>
<ul class="simple">
<li><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-January/116016.html">https://mail.python.org/pipermail/python-dev/2012-January/116016.html</a></li>
<li><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-February/116656.html">https://mail.python.org/pipermail/python-dev/2012-February/116656.html</a></li>
<li><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-February/116688.html">https://mail.python.org/pipermail/python-dev/2012-February/116688.html</a></li>
</ul>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id8">Specification</a></h1>
<p>The <tt class="docutils literal">ipaddr</tt> module defines a total of 6 new public classes, 3 for
manipulating IPv4 objects and 3 for manipulating IPv6 objects.
The classes are as follows:</p>
<ul class="simple">
<li><tt class="docutils literal">IPv4Address</tt>/<tt class="docutils literal">IPv6Address</tt> - These define individual addresses, for
example the IPv4 address returned by an A record query for
www.google.com (74.125.224.84) or the IPv6 address returned by a
AAAA record query for ipv6.google.com (2001:4860:4001:801::1011).</li>
<li><tt class="docutils literal">IPv4Network</tt>/<tt class="docutils literal">IPv6Network</tt> - These define networks or groups of
addresses, for example the IPv4 network reserved for multicast use
(224.0.0.0/4) or the IPv6 network reserved for multicast
(ff00::/8, wow, that's big).</li>
<li><tt class="docutils literal">IPv4Interface</tt>/<tt class="docutils literal">IPv6Interface</tt> - These hybrid classes refer to an
individual address on a given network.  For example, the IPV4
address 192.0.2.1 on the network 192.0.2.0/24 could be referred to
as 192.0.2.1/24.  Likewise, the IPv6 address 2001:DB8::1 on the
network 2001:DB8::/96 could be referred to as 2001:DB8::1/96.
It's very common to refer to addresses assigned to computer
network interfaces like this, hence the Interface name.</li>
</ul>
<p>All IPv4 classes share certain characteristics and methods; the
number of bits needed to represent them, whether or not they
belong to certain special IPv4 network ranges, etc.  Similarly,
all IPv6 classes share characteristics and methods.</p>
<p><tt class="docutils literal">ipaddr</tt> makes extensive use of inheritance to avoid code
duplication as much as possible.  The parent classes are private,
but they are outlined here:</p>
<ul class="simple">
<li><tt class="docutils literal">_IPAddrBase</tt> - Provides methods common to all <tt class="docutils literal">ipaddr</tt> objects.</li>
<li><tt class="docutils literal">_BaseAddress</tt> - Provides methods common to <tt class="docutils literal">IPv4Address</tt> and
<tt class="docutils literal">IPv6Address</tt>.</li>
<li><tt class="docutils literal">_BaseInterface</tt> - Provides methods common to <tt class="docutils literal">IPv4Interface</tt> and
<tt class="docutils literal">IPv6Interface</tt>, as well as <tt class="docutils literal">IPv4Network</tt> and <tt class="docutils literal">IPv6Network</tt> (<tt class="docutils literal">ipaddr</tt>
treats the Network classes as a special case of Interface).</li>
<li><tt class="docutils literal">_BaseV4</tt> - Provides methods and variables (eg, <tt class="docutils literal">_max_prefixlen</tt>)
common to all IPv4 classes.</li>
<li><tt class="docutils literal">_BaseV6</tt> - Provides methods and variables common to all IPv6 classes.</li>
</ul>
<p>Comparisons between objects of differing IP versions results in a
<tt class="docutils literal">TypeError</tt> <a class="footnote-reference" href="#id2" id="id1">[1]</a>.  Additionally, comparisons of objects with
different _Base parent classes results in a <tt class="docutils literal">TypeError</tt>.  The effect
of the _Base parent class limitation is that <tt class="docutils literal">IPv4Interface</tt>'s can
be compared to <tt class="docutils literal">IPv4Network</tt>'s and <tt class="docutils literal">IPv6Interface</tt>'s can be compared
to <tt class="docutils literal">IPv6Network</tt>'s.</p>
</div>
<div class="section" id="reference-implementation">
<h1><a class="toc-backref" href="#id9">Reference Implementation</a></h1>
<p>The current reference implementation can be found at:</p>
<p><a class="reference external" href="http://code.google.com/p/ipaddress-py/source/browse/ipaddress.py">http://code.google.com/p/ipaddress-py/source/browse/ipaddress.py</a></p>
<p>Or see the tarball to include the README and unittests.
<a class="reference external" href="http://code.google.com/p/ipaddress-py/downloads/detail?name=ipaddress-1.0.tar.gz">http://code.google.com/p/ipaddress-py/downloads/detail?name=ipaddress-1.0.tar.gz</a></p>
<p>More information about using the reference implementation can be
found at: <a class="reference external" href="http://code.google.com/p/ipaddr-py/wiki/Using3144">http://code.google.com/p/ipaddr-py/wiki/Using3144</a></p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id10">References</a></h1>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><p class="first">Appealing to authority is a logical fallacy, but Vint Cerf is an
authority who can't be ignored. Full text of the email
follows:</p>
<blockquote class="last">
<p>I have seen a substantial amount of traffic about IPv4 and
IPv6 comparisons and the general consensus is that these are
not comparable.</p>
<p>If we were to take a very simple minded view, we might treat
these as pure integers in which case there is an ordering but
not a useful one.</p>
<p>In the IPv4 world, &quot;length&quot; is important because we take
longest (most specific) address first for routing.  Length is
determine by the mask, as you know.</p>
<p>Assuming that the same style of argument works in IPv6, we
would have to conclude that treating an IPv6 value purely as
an integer for comparison with IPv4 would lead to some really
strange results.</p>
<p>All of IPv4 space would lie in the host space of 0::0/96
prefix of IPv6. For any useful interpretation of IPv4, this is
a non-starter.</p>
<p>I think the only sensible conclusion is that IPv4 values and
IPv6 values should be treated as non-comparable.</p>
<p>Vint</p>
</blockquote>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id11">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>


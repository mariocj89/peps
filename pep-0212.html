<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">212</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Loop Counter Iteration</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0212.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">nowonder&#32;&#97;t&#32;nowonder.de (Peter Schneider-Kamp)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Rejected</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">22-Aug-2000</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.1</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#rejection-notice" id="id13">Rejection Notice</a></li>
<li><a class="reference internal" href="#introduction" id="id14">Introduction</a></li>
<li><a class="reference internal" href="#motivation" id="id15">Motivation</a></li>
<li><a class="reference internal" href="#loop-counter-iteration" id="id16">Loop counter iteration</a></li>
<li><a class="reference internal" href="#the-proposed-solutions" id="id17">The Proposed Solutions</a></li>
<li><a class="reference internal" href="#non-reserved-keyword-indexing" id="id18">Non-reserved keyword <tt class="docutils literal">indexing</tt></a></li>
<li><a class="reference internal" href="#built-in-functions-indices-and-irange" id="id19">Built-in functions <tt class="docutils literal">indices</tt> and <tt class="docutils literal">irange</tt></a></li>
<li><a class="reference internal" href="#methods-for-sequence-objects" id="id20">Methods for sequence objects</a></li>
<li><a class="reference internal" href="#implementations" id="id21">Implementations</a></li>
<li><a class="reference internal" href="#backward-compatibility-issues" id="id22">Backward Compatibility Issues</a></li>
<li><a class="reference internal" href="#copyright" id="id23">Copyright</a></li>
<li><a class="reference internal" href="#references" id="id24">References</a></li>
</ul>
</div>
<div class="section" id="rejection-notice">
<h1><a class="toc-backref" href="#id13">Rejection Notice</a></h1>
<p>This PEP has been rejected.  <tt class="docutils literal">enumerate()</tt>, introduced in <a class="reference external" href="/dev/peps/pep-0279">PEP 279</a> <a class="footnote-reference" href="#id12" id="id1">[6]</a>,
covers the use-case proposed in this PEP, and the PEP author has been
unreachable.</p>
</div>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id14">Introduction</a></h1>
<p>This PEP describes the often proposed feature of exposing the loop
counter in for-loops.  This PEP tracks the status and ownership of
this feature.  It contains a description of the feature and
outlines changes necessary to support the feature.  This PEP
summarizes discussions held in mailing list forums, and provides
URLs for further information, where appropriate.  The CVS revision
history of this file contains the definitive historical record.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id15">Motivation</a></h1>
<p>Standard for-loops in Python iterate over the elements of a
sequence <a class="footnote-reference" href="#id7" id="id2">[1]</a>.  Often it is desirable to loop over the indices or
both the elements and the indices instead.</p>
<p>The common idioms used to accomplish this are unintuitive.  This
PEP proposes two different ways of exposing the indices.</p>
</div>
<div class="section" id="loop-counter-iteration">
<h1><a class="toc-backref" href="#id16">Loop counter iteration</a></h1>
<p>The current idiom for looping over the indices makes use of the
built-in <tt class="docutils literal">range</tt> function:</p>
<pre class="literal-block">
for i in range(len(sequence)):
    # work with index i
</pre>
<p>Looping over both elements and indices can be achieved either by the
old idiom or by using the new <tt class="docutils literal">zip</tt> built-in function <a class="footnote-reference" href="#id8" id="id3">[2]</a>:</p>
<pre class="literal-block">
for i in range(len(sequence)):
    e = sequence[i]
    # work with index i and element e
</pre>
<p>or:</p>
<pre class="literal-block">
for i, e in zip(range(len(sequence)), sequence):
   # work with index i and element e
</pre>
</div>
<div class="section" id="the-proposed-solutions">
<h1><a class="toc-backref" href="#id17">The Proposed Solutions</a></h1>
<p>There are three solutions that have been discussed.  One adds a
non-reserved keyword, the other adds two built-in functions.
A third solution adds methods to sequence objects.</p>
</div>
<div class="section" id="non-reserved-keyword-indexing">
<h1><a class="toc-backref" href="#id18">Non-reserved keyword <tt class="docutils literal">indexing</tt></a></h1>
<p>This solution would extend the syntax of the for-loop by adding
an optional <tt class="docutils literal">&lt;variable&gt; indexing</tt> clause which can also be used
instead of the <tt class="docutils literal">&lt;variable&gt; in</tt> clause.</p>
<p>Looping over the indices of a sequence would thus become:</p>
<pre class="literal-block">
for i indexing sequence:
    # work with index i
</pre>
<p>Looping over both indices and elements would similarly be:</p>
<pre class="literal-block">
for i indexing e in sequence:
    # work with index i and element e
</pre>
</div>
<div class="section" id="built-in-functions-indices-and-irange">
<h1><a class="toc-backref" href="#id19">Built-in functions <tt class="docutils literal">indices</tt> and <tt class="docutils literal">irange</tt></a></h1>
<p>This solution adds two built-in functions <tt class="docutils literal">indices</tt> and <tt class="docutils literal">irange</tt>.
The semantics of these can be described as follows:</p>
<pre class="literal-block">
def indices(sequence):
    return range(len(sequence))

def irange(sequence):
    return zip(range(len(sequence)), sequence)
</pre>
<p>These functions could be implemented either eagerly or lazily and
should be easy to extend in order to accept more than one sequence
argument.</p>
<p>The use of these functions would simplify the idioms for looping
over the indices and over both elements and indices:</p>
<pre class="literal-block">
for i in indices(sequence):
    # work with index i

for i, e in irange(sequence):
    # work with index i and element e
</pre>
</div>
<div class="section" id="methods-for-sequence-objects">
<h1><a class="toc-backref" href="#id20">Methods for sequence objects</a></h1>
<p>This solution proposes the addition of <tt class="docutils literal">indices</tt>, <tt class="docutils literal">items</tt>
and <tt class="docutils literal">values</tt> methods to sequences, which enable looping over
indices only, both indices and elements, and elements only
respectively.</p>
<p>This would immensely simplify the idioms for looping over indices
and for looping over both elements and indices:</p>
<pre class="literal-block">
for i in sequence.indices():
    # work with index i

for i, e in sequence.items():
    # work with index i and element e
</pre>
<p>Additionally it would allow to do looping over the elements
of sequences and dictionaries in a consistent way:</p>
<pre class="literal-block">
for e in sequence_or_dict.values():
    # do something with element e
</pre>
</div>
<div class="section" id="implementations">
<h1><a class="toc-backref" href="#id21">Implementations</a></h1>
<p>For all three solutions some more or less rough patches exist
as patches at SourceForge:</p>
<ul class="simple">
<li><tt class="docutils literal">for i indexing a in l</tt>: exposing the for-loop counter <a class="footnote-reference" href="#id9" id="id4">[3]</a></li>
<li>add <tt class="docutils literal">indices()</tt> and <tt class="docutils literal">irange()</tt> to built-ins <a class="footnote-reference" href="#id10" id="id5">[4]</a></li>
<li>add <tt class="docutils literal">items()</tt> method to listobject <a class="footnote-reference" href="#id11" id="id6">[5]</a></li>
</ul>
<p>All of them have been pronounced on and rejected by the BDFL.</p>
<p>Note that the <tt class="docutils literal">indexing</tt> keyword is only a <tt class="docutils literal">NAME</tt> in the
grammar and so does not hinder the general use of <tt class="docutils literal">indexing</tt>.</p>
</div>
<div class="section" id="backward-compatibility-issues">
<h1><a class="toc-backref" href="#id22">Backward Compatibility Issues</a></h1>
<p>As no keywords are added and the semantics of existing code
remains unchanged, all three solutions can be implemented
without breaking existing code.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id23">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id24">References</a></h1>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><a class="reference external" href="http://docs.python.org/reference/compound_stmts.html#for">http://docs.python.org/reference/compound_stmts.html#for</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Lockstep Iteration, <a class="reference external" href="/dev/peps/pep-0201">PEP 201</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[3]</a></td><td><a class="reference external" href="http://sourceforge.net/patch/download.php?id=101138">http://sourceforge.net/patch/download.php?id=101138</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[4]</a></td><td><a class="reference external" href="http://sourceforge.net/patch/download.php?id=101129">http://sourceforge.net/patch/download.php?id=101129</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[5]</a></td><td><a class="reference external" href="http://sourceforge.net/patch/download.php?id=101178">http://sourceforge.net/patch/download.php?id=101178</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[6]</a></td><td><a class="reference external" href="/dev/peps/pep-0279">PEP 279</a>, The enumerate() built-in function, Hettinger
<a class="reference external" href="https://www.python.org/dev/peps/pep-0279/">https://www.python.org/dev/peps/pep-0279/</a></td></tr>
</tbody>
</table>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


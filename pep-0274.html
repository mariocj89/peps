<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">274</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Dict Comprehensions</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0274.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Barry Warsaw &lt;barry&#32;&#97;t&#32;python.org&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">25-Oct-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.7, 3.0 (originally 2.3)</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">29-Oct-2001</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#resolution" id="id3">Resolution</a></li>
<li><a class="reference internal" href="#proposed-solution" id="id4">Proposed Solution</a></li>
<li><a class="reference internal" href="#rationale" id="id5">Rationale</a></li>
<li><a class="reference internal" href="#semantics" id="id6">Semantics</a></li>
<li><a class="reference internal" href="#examples" id="id7">Examples</a></li>
<li><a class="reference internal" href="#implementation" id="id8">Implementation</a></li>
<li><a class="reference internal" href="#copyright" id="id9">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p><a class="reference external" href="/dev/peps/pep-0202">PEP 202</a> introduces a syntactical extension to Python called the
&quot;list comprehension&quot;.  This PEP proposes a similar syntactical
extension called the &quot;dictionary comprehension&quot; or &quot;dict
comprehension&quot; for short.  You can use dict comprehensions in ways
very similar to list comprehensions, except that they produce
Python dictionary objects instead of list objects.</p>
</div>
<div class="section" id="resolution">
<h1><a class="toc-backref" href="#id3">Resolution</a></h1>
<p>This PEP was originally written for inclusion in Python 2.3.  It
was withdrawn after observation that substantially all of its
benefits were subsumed by generator expressions coupled with the
<tt class="docutils literal">dict()</tt> constructor.</p>
<p>However, Python 2.7 and 3.0 introduces this exact feature, as well
as the closely related set comprehensions.  On 2012-04-09, the PEP
was changed to reflect this reality by updating its Status to
Accepted, and updating the Python-Version field.  The Open
Questions section was also removed since these have been long
resolved by the current implementation.</p>
</div>
<div class="section" id="proposed-solution">
<h1><a class="toc-backref" href="#id4">Proposed Solution</a></h1>
<p>Dict comprehensions are just like list comprehensions, except that
you group the expression using curly braces instead of square
braces.  Also, the left part before the <tt class="docutils literal">for</tt> keyword expresses
both a key and a value, separated by a colon.  The notation is
specifically designed to remind you of list comprehensions as
applied to dictionaries.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id5">Rationale</a></h1>
<p>There are times when you have some data arranged as a sequences of
length-2 sequences, and you want to turn that into a dictionary.
In Python 2.2, the <tt class="docutils literal">dict()</tt> constructor accepts an argument that is
a sequence of length-2 sequences, used as (key, value) pairs to
initialize a new dictionary object.</p>
<p>However, the act of turning some data into a sequence of length-2
sequences can be inconvenient or inefficient from a memory or
performance standpoint.  Also, for some common operations, such as
turning a list of things into a set of things for quick duplicate
removal or set inclusion tests, a better syntax can help code
clarity.</p>
<p>As with list comprehensions, an explicit for loop can always be
used (and in fact was the only way to do it in earlier versions of
Python).  But as with list comprehensions, dict comprehensions can
provide a more syntactically succinct idiom that the traditional
for loop.</p>
</div>
<div class="section" id="semantics">
<h1><a class="toc-backref" href="#id6">Semantics</a></h1>
<p>The semantics of dict comprehensions can actually be demonstrated
in stock Python 2.2, by passing a list comprehension to the
built-in dictionary constructor:</p>
<pre class="literal-block">
&gt;&gt;&gt; dict([(i, chr(65+i)) for i in range(4)])
</pre>
<p>is semantically equivalent to:</p>
<pre class="literal-block">
&gt;&gt;&gt; {i : chr(65+i) for i in range(4)}
</pre>
<p>The dictionary constructor approach has two distinct disadvantages
from the proposed syntax though.  First, it isn't as legible as a
dict comprehension.  Second, it forces the programmer to create an
in-core list object first, which could be expensive.</p>
</div>
<div class="section" id="examples">
<h1><a class="toc-backref" href="#id7">Examples</a></h1>
<pre class="literal-block">
&gt;&gt;&gt; print {i : chr(65+i) for i in range(4)}
{0 : 'A', 1 : 'B', 2 : 'C', 3 : 'D'}
</pre>
<pre class="literal-block">
&gt;&gt;&gt; print {k : v for k, v in someDict.iteritems()} == someDict.copy()
1
</pre>
<pre class="literal-block">
&gt;&gt;&gt; print {x.lower() : 1 for x in list_of_email_addrs}
{'barry&#64;zope.com'   : 1, 'barry&#64;python.org' : 1, 'guido&#64;python.org' : 1}
</pre>
<pre class="literal-block">
&gt;&gt;&gt; def invert(d):
...     return {v : k for k, v in d.iteritems()}
...
&gt;&gt;&gt; d = {0 : 'A', 1 : 'B', 2 : 'C', 3 : 'D'}
&gt;&gt;&gt; print invert(d)
{'A' : 0, 'B' : 1, 'C' : 2, 'D' : 3}
</pre>
<pre class="literal-block">
&gt;&gt;&gt; {(k, v): k+v for k in range(4) for v in range(4)}
... {(3, 3): 6, (3, 2): 5, (3, 1): 4, (0, 1): 1, (2, 1): 3,
   (0, 2): 2, (3, 0): 3, (0, 3): 3, (1, 1): 2, (1, 0): 1,
   (0, 0): 0, (1, 2): 3, (2, 0): 2, (1, 3): 4, (2, 2): 4, (
   2, 3): 5}
</pre>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id8">Implementation</a></h1>
<p>All implementation details were resolved in the Python 2.7 and 3.0
time-frame.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id9">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
fill-column: 70
End: -->
</div>


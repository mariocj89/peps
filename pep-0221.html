<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">221</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Import As</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0221.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">thomas&#32;&#97;t&#32;python.org (Thomas Wouters)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">15-Aug-2000</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.0</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id5">Introduction</a></li>
<li><a class="reference internal" href="#rationale" id="id6">Rationale</a></li>
<li><a class="reference internal" href="#implementation-details" id="id7">Implementation details</a></li>
<li><a class="reference internal" href="#copyright" id="id8">Copyright</a></li>
<li><a class="reference internal" href="#references" id="id9">References</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id5">Introduction</a></h1>
<p>This PEP describes the <tt class="docutils literal">import as</tt> proposal for Python 2.0.  This
PEP tracks the status and ownership of this feature.  It contains
a description of the feature and outlines changes necessary to
support the feature.  The CVS revision history of this file
contains the definitive historical record.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id6">Rationale</a></h1>
<p>This PEP proposes an extension of Python syntax regarding the
<tt class="docutils literal">import</tt> and <tt class="docutils literal">from &lt;module&gt; import</tt> statements.  These statements
load in a module, and either bind that module to a local name, or
binds objects from that module to a local name.  However, it is
sometimes desirable to bind those objects to a different name, for
instance to avoid name clashes.  This can currently be achieved
using the following idiom:</p>
<pre class="literal-block">
import os
real_os = os
del os
</pre>
<p>And similarly for the <tt class="docutils literal">from ... import</tt> statement:</p>
<pre class="literal-block">
from os import fdopen, exit, stat
os_fdopen = fdopen
os_stat = stat
del fdopen, stat
</pre>
<p>The proposed syntax change would add an optional <tt class="docutils literal">as</tt> clause to
both these statements, as follows:</p>
<pre class="literal-block">
import os as real_os
from os import fdopen as os_fdopen, exit, stat as os_stat
</pre>
<p>The <tt class="docutils literal">as</tt> name is not intended to be a keyword, and some trickery
has to be used to convince the CPython parser it isn't one.  For
more advanced parsers/tokenizers, however, this should not be a
problem.</p>
<p>A slightly special case exists for importing sub-modules.  The
statement</p>
<pre class="literal-block">
import os.path
</pre>
<p>stores the module <tt class="docutils literal">os</tt> locally as <tt class="docutils literal">os</tt>, so that the imported
submodule <tt class="docutils literal">path</tt> is accessible as <tt class="docutils literal">os.path</tt>.  As a result,</p>
<pre class="literal-block">
import os.path as p
</pre>
<p>stores <tt class="docutils literal">os.path</tt>, not <tt class="docutils literal">os</tt>, in <tt class="docutils literal">p</tt>.  This makes it effectively the
same as</p>
<pre class="literal-block">
from os import path as p
</pre>
</div>
<div class="section" id="implementation-details">
<h1><a class="toc-backref" href="#id7">Implementation details</a></h1>
<p>This PEP has been accepted, and the suggested code change has been
checked in.  The patch can still be found in the SourceForge patch
manager <a class="footnote-reference" href="#id3" id="id1">[1]</a>.  Currently, a <tt class="docutils literal">NAME</tt> field is used in the grammar rather
than a bare string, to avoid the keyword issue.  It introduces a
new bytecode, <tt class="docutils literal">IMPORT_STAR</tt>, which performs the <tt class="docutils literal">from module import
*</tt> behaviour, and changes the behaviour of the <tt class="docutils literal">IMPORT_FROM</tt>
bytecode so that it loads the requested name (which is always a
single name) onto the stack, to be subsequently stored by a <tt class="docutils literal">STORE</tt>
opcode. As a result, all names explicitly imported now follow the
<tt class="docutils literal">global</tt> directives.</p>
<p>The special case of <tt class="docutils literal">from module import *</tt> remains a special case,
in that it cannot accommodate an <tt class="docutils literal">as</tt> clause, and that no <tt class="docutils literal">STORE</tt>
opcodes are generated; the objects imported are loaded directly
into the local namespace. This also means that names imported in
this fashion are always local, and do not follow the <tt class="docutils literal">global</tt>
directive.</p>
<p>An additional change to this syntax has also been suggested, to
generalize the expression given after the <tt class="docutils literal">as</tt> clause.  Rather
than a single name, it could be allowed to be any expression that
yields a valid l-value; anything that can be assigned to.  The
change to accommodate this is minimal, as the patch <a class="footnote-reference" href="#id4" id="id2">[2]</a> proves, and
the resulting generalization allows a number of new constructs
that run completely parallel with other Python assignment
constructs. However, this idea has been rejected by Guido, as
&quot;hypergeneralization&quot;.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id8">Copyright</a></h1>
<p>This document has been placed in the Public Domain.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id9">References</a></h1>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://hg.python.org/cpython/rev/18385172fac0">https://hg.python.org/cpython/rev/18385172fac0</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://sourceforge.net/patch/?func=detailpatch&amp;patch_id=101234&amp;group_id=5470">http://sourceforge.net/patch/?func=detailpatch&amp;patch_id=101234&amp;group_id=5470</a></td></tr>
</tbody>
</table>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


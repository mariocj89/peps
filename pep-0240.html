<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">240</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Adding a Rational Literal to Python</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0240.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Christopher A. Craig &lt;python-pep&#32;&#97;t&#32;ccraig.org&gt;, Moshe Zadka &lt;moshez&#32;&#97;t&#32;zadka.site.co.il&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Rejected</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">11-Mar-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.2</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">16-Mar-2001</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id5">Abstract</a></li>
<li><a class="reference internal" href="#bdfl-pronouncement" id="id6">BDFL Pronouncement</a></li>
<li><a class="reference internal" href="#rationale" id="id7">Rationale</a></li>
<li><a class="reference internal" href="#proposal" id="id8">Proposal</a></li>
<li><a class="reference internal" href="#backwards-compatibility" id="id9">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#common-objections" id="id10">Common Objections</a></li>
<li><a class="reference internal" href="#references" id="id11">References</a></li>
<li><a class="reference internal" href="#copyright" id="id12">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id5">Abstract</a></h1>
<p>A different PEP <a class="footnote-reference" href="#id3" id="id1">[1]</a> suggests adding a builtin rational type to
Python.  This PEP suggests changing the ddd.ddd float literal to a
rational in Python, and modifying non-integer division to return
it.</p>
</div>
<div class="section" id="bdfl-pronouncement">
<h1><a class="toc-backref" href="#id6">BDFL Pronouncement</a></h1>
<p>This PEP is rejected.  The needs outlined in the rationale section
have been addressed to some extent by the acceptance of <a class="reference external" href="/dev/peps/pep-0327">PEP 327</a>
for decimal arithmetic.  Guido also noted, &quot;Rational arithmetic
was the default 'exact' arithmetic in ABC and it did not work out as
expected&quot;.  See the python-dev discussion on 17 June 2005 <a class="footnote-reference" href="#id4" id="id2">[2]</a>.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id7">Rationale</a></h1>
<p>Rational numbers are useful for exact and unsurprising arithmetic.
They give the correct results people have been taught in various
math classes.  Making the &quot;obvious&quot; non-integer type one with more
predictable semantics will surprise new programmers less than
using floating point numbers. As quite a few posts on c.l.py and
on <a class="reference external" href="mailto:tutor&#64;python.org">tutor&#64;python.org</a> have shown, people often get bit by strange
semantics of floating point numbers: for example, <tt class="docutils literal">round(0.98, 2)</tt>
still gives 0.97999999999999998.</p>
</div>
<div class="section" id="proposal">
<h1><a class="toc-backref" href="#id8">Proposal</a></h1>
<p>Literals conforming to the regular expression <tt class="docutils literal"><span class="pre">'\d*.\d*'</span></tt> will be
rational numbers.</p>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id9">Backwards Compatibility</a></h1>
<p>The only backwards compatible issue is the type of literals
mentioned above.  The following migration is suggested:</p>
<ol class="arabic simple">
<li>The next Python after approval will allow
<tt class="docutils literal">from __future__ import rational_literals</tt>
to cause all such literals to be treated as rational numbers.</li>
<li>Python 3.0 will have a warning, turned on by default, about
such literals in the absence of a `` __future__`` statement.  The
warning message will contain information about the <tt class="docutils literal">__future__</tt>
statement, and indicate that to get floating point literals,
they should be suffixed with &quot;e0&quot;.</li>
<li>Python 3.1 will have the warning turned off by default.  This
warning will stay in place for 24 months, at which time the
literals will be rationals and the warning will be removed.</li>
</ol>
</div>
<div class="section" id="common-objections">
<h1><a class="toc-backref" href="#id10">Common Objections</a></h1>
<p>Rationals are slow and memory intensive!
(Relax, I'm not taking floats away, I'm just adding two more characters.
<tt class="docutils literal">1e0</tt> will still be a float)</p>
<p>Rationals must present themselves as a decimal float or they will be
horrible for users expecting decimals (i.e. <tt class="docutils literal"><span class="pre">str(.5)</span></tt> should return <tt class="docutils literal">'.5'</tt> and
not <tt class="docutils literal">'1/2'</tt>).  This means that many rationals must be truncated at some
point, which gives us a new loss of precision.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id11">References</a></h1>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="/dev/peps/pep-0239">PEP 239</a>, Adding a Rational Type to Python, Zadka,
<a class="reference external" href="http://www.python.org/dev/peps/pep-0239/">http://www.python.org/dev/peps/pep-0239/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Raymond Hettinger, Propose rejection of PEPs 239 and 240 -- a builtin
rational type and rational literals
<a class="reference external" href="https://mail.python.org/pipermail/python-dev/2005-June/054281.html">https://mail.python.org/pipermail/python-dev/2005-June/054281.html</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id12">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
End: -->
</div>


<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">297</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Support for System Upgrades</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0297.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">mal&#32;&#97;t&#32;lemburg.com (Marc-Andr√© Lemburg)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Rejected</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">19-Jul-2001</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.6</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#rejection-notice" id="id1">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#problem" id="id3">Problem</a></li>
<li><a class="reference internal" href="#proposed-solutions" id="id4">Proposed Solutions</a></li>
<li><a class="reference internal" href="#scope" id="id5">Scope</a></li>
<li><a class="reference internal" href="#credits" id="id6">Credits</a></li>
<li><a class="reference internal" href="#references" id="id7">References</a></li>
<li><a class="reference internal" href="#copyright" id="id8">Copyright</a></li>
</ul>
</div>
<div class="section" id="rejection-notice">
<h1><a class="toc-backref" href="#id1">Rejection Notice</a></h1>
<p>This PEP is rejected for failure to generate significant interest.</p>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p>This PEP proposes strategies to allow the Python standard library
to be upgraded in parts without having to reinstall the complete
distribution or having to wait for a new patch level release.</p>
</div>
<div class="section" id="problem">
<h1><a class="toc-backref" href="#id3">Problem</a></h1>
<p>Python currently does not allow overriding modules or packages in
the standard library per default. Even though this is possible by
defining a <tt class="docutils literal">PYTHONPATH</tt> environment variable (the paths defined in
this variable are prepended to the Python standard library path),
there is no standard way of achieving this without changing the
configuration.</p>
<p>Since Python's standard library is starting to host packages which
are also available separately, e.g. the distutils, email and PyXML
packages, which can also be installed independently of the Python
distribution, it is desirable to have an option to upgrade these
packages without having to wait for a new patch level release of
the Python interpreter to bring along the changes.</p>
<p>On some occasions, it may also be desirable to update modules of
the standard library without going through the whole Python release
cycle, e.g. in order to provide hot-fixes for security problems.</p>
</div>
<div class="section" id="proposed-solutions">
<h1><a class="toc-backref" href="#id4">Proposed Solutions</a></h1>
<p>This PEP proposes two different but not necessarily conflicting
solutions:</p>
<ol class="arabic">
<li><p class="first">Adding a new standard search path to <tt class="docutils literal">sys.path</tt>:
<tt class="docutils literal"><span class="pre">$stdlibpath/system-packages</span></tt> just before the <tt class="docutils literal">$stdlibpath</tt>
entry. This complements the already existing entry for site
add-ons <tt class="docutils literal"><span class="pre">$stdlibpath/site-packages</span></tt> which is appended to the
<tt class="docutils literal">sys.path</tt> at interpreter startup time.</p>
<p>To make use of this new standard location, distutils will need
to grow support for installing certain packages in
<tt class="docutils literal"><span class="pre">$stdlibpath/system-packages</span></tt> rather than the standard location
for third-party packages <tt class="docutils literal"><span class="pre">$stdlibpath/site-packages</span></tt>.</p>
</li>
<li><p class="first">Tweaking distutils to install directly into <tt class="docutils literal">$stdlibpath</tt> for the
system upgrades rather than into <tt class="docutils literal"><span class="pre">$stdlibpath/site-packages</span></tt>.</p>
</li>
</ol>
<p>The first solution has a few advantages over the second:</p>
<ul class="simple">
<li>upgrades can be easily identified (just look in
<tt class="docutils literal"><span class="pre">$stdlibpath/system-packages</span></tt>)</li>
<li>upgrades can be de-installed without affecting the rest
of the interpreter installation</li>
<li>modules can be virtually removed from packages; this is
due to the way Python imports packages: once it finds the
top-level package directory it stay in this directory for
all subsequent package submodule imports</li>
<li>the approach has an overall much cleaner design than the
hackish install on top of an existing installation approach</li>
</ul>
<p>The only advantages of the second approach are that the Python
interpreter does not have to changed and that it works with
older Python versions.</p>
<p>Both solutions require changes to distutils. These changes can
also be implemented by package authors, but it would be better to
define a standard way of switching on the proposed behaviour.</p>
</div>
<div class="section" id="scope">
<h1><a class="toc-backref" href="#id5">Scope</a></h1>
<p>Solution 1: Python 2.6 and up</p>
<p>Solution 2: all Python versions supported by distutils</p>
</div>
<div class="section" id="credits">
<h1><a class="toc-backref" href="#id6">Credits</a></h1>
<p>None</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id7">References</a></h1>
<p>None</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id8">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>


<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">430</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Migrating to Python 3 as the default online documentation</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0430.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Nick Coghlan &lt;ncoghlan&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">BDFL-Delegate:</th><td class="field-body">Georg Brandl</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Informational</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">27-Oct-2012</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id4">Abstract</a></li>
<li><a class="reference internal" href="#background" id="id5">Background</a></li>
<li><a class="reference internal" href="#key-concerns" id="id6">Key Concerns</a><ul>
<li><a class="reference internal" href="#don-t-confuse-beginners" id="id7">Don't Confuse Beginners</a></li>
<li><a class="reference internal" href="#don-t-break-useful-resources" id="id8">Don't Break Useful Resources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#proposal" id="id9">Proposal</a><ul>
<li><a class="reference internal" href="#presented-urls" id="id10">Presented URLs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rationale" id="id11">Rationale</a></li>
<li><a class="reference internal" href="#implementation" id="id12">Implementation</a></li>
<li><a class="reference internal" href="#references" id="id13">References</a></li>
<li><a class="reference internal" href="#copyright" id="id14">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id4">Abstract</a></h1>
<p>This PEP proposes a strategy for migrating the default version of the
Python documentation presented to users of Python when accessing
docs.python.org from 2.7 to Python 3.3.</p>
<p>It proposes a backwards compatible scheme that preserves the meaning of
existing deep links in to the Python 2 documentation, while still
presenting the Python 3 documentation by default, and presenting the
Python 2 and 3 documentation in a way that avoids making the Python 3
documentation look like a second-class citizen.</p>
</div>
<div class="section" id="background">
<h1><a class="toc-backref" href="#id5">Background</a></h1>
<p>With the transition of the overall Python ecosystem from Python 2 to Python 3
still in progress, one question which arises periodically [<a class="reference internal" href="#id1">1</a>, <a class="reference internal" href="#id2">2</a>] is when
and how to handle the change from providing the Python 2 documentation as
the default version displayed at the docs.python.org root URL to providing
the Python 3 documentation.</p>
</div>
<div class="section" id="key-concerns">
<h1><a class="toc-backref" href="#id6">Key Concerns</a></h1>
<p>There are a couple of key concerns that any migration proposal needs to
address.</p>
<div class="section" id="don-t-confuse-beginners">
<h2><a class="toc-backref" href="#id7">Don't Confuse Beginners</a></h2>
<p>Many beginners learn Python through third party resources. These resources,
not all of which are online resources, may reference in to the python.org
online documentation for additional background and details.</p>
<p>Importantly, even when the online documentation is updated, the &quot;version
added&quot; and &quot;version changed&quot; tags usually provide enough information for
users to adjust appropriately for the specific version they are using.</p>
<p>While deep links in to the python.org documentation may occasionally break
within the Python 2 series, this is very rare.</p>
<p>Migrating to Python 3 is a very different matter. Many links would break due
to renames and removals, and the &quot;version added&quot; and &quot;version changed&quot;
information for the Python 2 series is completely absent.</p>
</div>
<div class="section" id="don-t-break-useful-resources">
<h2><a class="toc-backref" href="#id8">Don't Break Useful Resources</a></h2>
<p>There are many useful Python resources out there, such as the mailing list
archives on python.org and question-and-answer sites like Stack Overflow,
where links are highly unlikely to be updated, no matter how much notice
is provided.</p>
<p>Old posts and answers to questions all currently link to docs.python.org
expecting to get the Python 2 documentation at unqualified URLs. Links from
answers that relate to Python 3 are explicitly qualified with <tt class="docutils literal">/py3k/</tt> in
the path component.</p>
</div>
</div>
<div class="section" id="proposal">
<h1><a class="toc-backref" href="#id9">Proposal</a></h1>
<p>This PEP (based on an idea originally put forward back in May [<a class="reference internal" href="#id3">3</a>]) is to
<em>not migrate</em> the Python 2 specific deep links at all, and instead adopt a
scheme where all URLs presented to users on docs.python.org are qualified
appropriately with the relevant release series.</p>
<p>Visitors to the root URL at <tt class="docutils literal"><span class="pre">http://docs.python.org</span></tt> will be automatically
redirected to <tt class="docutils literal"><span class="pre">http://docs.python.org/3/</span></tt>, but links deeper in
the version-specific hierarchy, such as to
<tt class="docutils literal"><span class="pre">http://docs.python.org/library/os</span></tt>, will instead be redirected to
a Python 2 specific link such as <tt class="docutils literal"><span class="pre">http://docs.python.org/2/library/os</span></tt>.</p>
<p>The specific subpaths which will be redirected to explicitly qualified
paths for the Python 2 docs are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">/c-api/</span></tt></li>
<li><tt class="docutils literal">/distutils/</tt></li>
<li><tt class="docutils literal">/extending/</tt></li>
<li><tt class="docutils literal">/faq/</tt></li>
<li><tt class="docutils literal">/howto/</tt></li>
<li><tt class="docutils literal">/library/</tt></li>
<li><tt class="docutils literal">/reference/</tt></li>
<li><tt class="docutils literal">/tutorial/</tt></li>
<li><tt class="docutils literal">/using/</tt></li>
<li><tt class="docutils literal">/whatsnew/</tt></li>
<li><tt class="docutils literal">/about.html</tt></li>
<li><tt class="docutils literal">/bugs.html</tt></li>
<li><tt class="docutils literal">/contents.html</tt></li>
<li><tt class="docutils literal">/copyright.html</tt></li>
<li><tt class="docutils literal">/license.html</tt></li>
<li><tt class="docutils literal">/genindex.html</tt></li>
<li><tt class="docutils literal">/glossary.html</tt></li>
<li><tt class="docutils literal"><span class="pre">/py-modindex.html</span></tt></li>
<li><tt class="docutils literal">/search.html</tt></li>
</ul>
<p>The existing <tt class="docutils literal">/py3k/</tt> subpath will be redirected to the new <tt class="docutils literal">/3/</tt>
subpath.</p>
<div class="section" id="presented-urls">
<h2><a class="toc-backref" href="#id10">Presented URLs</a></h2>
<p>With this scheme, the following URLs would be presented to users after
resolution of any aliasing and rewriting rules:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://docs.python.org/x/*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://docs.python.org/x.y/*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://docs.python.org/dev/*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://docs.python.org/release/x.y.z/*</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://docs.python.org/devguide</span></tt></li>
</ul>
<p>The <tt class="docutils literal">/x/</tt> URLs mean &quot;give me the latest documentation for a released
version in this release series&quot;. It will draw the documentation from the
relevant maintenance branch in source control (this will always be the
2.7 branch for Python 2 and is currently 3.3 for Python 3). Differences
relative to previous versions in the release series will be available
through &quot;version added&quot; and &quot;version changed&quot; markers.</p>
<p>The <tt class="docutils literal">/x.y/</tt> URLs mean &quot;give me the latest documentation for this release&quot;.
It will draw the documentation from the relevant maintenance branch in
source control (or the default branch for the currently in development
version). It differs from the status quo in that the URLs will
actually remain available in the user's browser for easy copy and pasting.
(Currently, references to specific versions that are not the latest in their
release series will resolve to a stable URL for a specific maintenance
version in the &quot;release&quot; hierarchy, while the current latest version in the
release series resolves to the release series URL. This makes it hard to get
a &quot;latest version specific URL&quot;, since it is always necessary to construct
them manually).</p>
<p>The <tt class="docutils literal">/dev/</tt> URL means the documentation for the default branch in source
control.</p>
<p>The <tt class="docutils literal">/release/x.y.x/</tt> URLs will refer to the documentation of those
releases, exactly as it was at the time of the release.</p>
<p>The developer's guide is not version specific, and thus retains its own
stable <tt class="docutils literal">/devguide/</tt> URL.</p>
</div>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id11">Rationale</a></h1>
<p>There is some desire to switch the unqualified references to mean Python 3
as a sign of confidence in Python 3. Such a move would either break a lot of
things, or else involve an awful lot of work to <em>avoid</em> breaking things.</p>
<p>I believe we can get much the same effect without breaking the world by:</p>
<ol class="arabic simple">
<li>Deprecating the use of unqualified references to the online
documentation (while promising to preserve the meaning of such
references indefinitely)</li>
<li>Updating all python.org and python-dev controlled links to use
qualified references (excluding archived email)</li>
<li>Redirecting visitors to the root of <tt class="docutils literal"><span class="pre">http://docs.python.org</span></tt> to
<tt class="docutils literal"><span class="pre">http://docs.python.org/3.x</span></tt></li>
</ol>
<p>Most importantly, because this scheme doesn't alter the behaviour of any
existing deep links, it could be implemented with a significantly shorter
warning period than would be required for a scheme that risked breaking
deep links, or started to redirect unqualified links to Python 3. The
only part of the scheme which would require any warning at all is the
step of redirecting the &quot;<a class="reference external" href="http://docs.python.org/">http://docs.python.org/</a>&quot; landing page to the
Python 3.3 documentation.</p>
<p>Namespaces are one honking great idea - let's do more of those.</p>
<p>Note that the approach described in this PEP gives two ways to access the
content of the default branch: as <tt class="docutils literal">/dev/</tt> or using the appropriate
<tt class="docutils literal">/x.y/</tt> reference. This is deliberate, as the default branch is referenced
for two different purposes:</p>
<ul class="simple">
<li>to provide additional information when discussing an upcoming feature of
the next release (a <tt class="docutils literal">/x.y/</tt> URL is appropriate)</li>
<li>to provide a stable destination for developers to access the documentation
of the next feature release, regardless of the version (a <tt class="docutils literal">/dev/</tt> URL is
appropriate)</li>
</ul>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id12">Implementation</a></h1>
<p>The URLs on docs.python.org are controlled by the python.org infrastructure
team rather than through the CPython source repo, so acceptance and
implementation of the ideas in this PEP will be up to the team.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id13">References</a></h1>
<table class="docutils footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>May 2012 discussion
(<a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-May/119524.html">https://mail.python.org/pipermail/python-dev/2012-May/119524.html</a>)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>October 2012 discussion
(<a class="reference external" href="https://mail.python.org/pipermail/python-ideas/2012-October/017406.html">https://mail.python.org/pipermail/python-ideas/2012-October/017406.html</a>)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>Using a &quot;/latest/&quot; path prefix
(<a class="reference external" href="https://mail.python.org/pipermail/python-dev/2012-May/119567.html">https://mail.python.org/pipermail/python-dev/2012-May/119567.html</a>)</td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id14">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
</div>


<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">459</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Standard Metadata Extensions for Python Software Packages</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0459.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Nick Coghlan &lt;ncoghlan&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">BDFL-Delegate:</th><td class="field-body">Nick Coghlan &lt;ncoghlan&#32;&#97;t&#32;gmail.com&gt;</td>
</tr>
<tr class="field"><th class="field-name">Discussions-To:</th><td class="field-body">Distutils SIG &lt;<a class="reference external" href="mailto:distutils-sig&#64;python.org?subject=PEP%20459">distutils-sig&#32;&#97;t&#32;python.org</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Deferred</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Requires:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0426">426</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">11 Nov 2013</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">21 Dec 2013</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id2">Abstract</a></li>
<li><a class="reference internal" href="#pep-deferral" id="id3">PEP Deferral</a></li>
<li><a class="reference internal" href="#standard-extension-namespace" id="id4">Standard Extension Namespace</a></li>
<li><a class="reference internal" href="#the-python-details-extension" id="id5">The <tt class="docutils literal">python.details</tt> extension</a><ul>
<li><a class="reference internal" href="#license" id="id6">License</a></li>
<li><a class="reference internal" href="#keywords" id="id7">Keywords</a></li>
<li><a class="reference internal" href="#classifiers" id="id8">Classifiers</a></li>
<li><a class="reference internal" href="#document-names" id="id9">Document names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-python-project-extension" id="id10">The <tt class="docutils literal">python.project</tt> extension</a><ul>
<li><a class="reference internal" href="#contact-information" id="id11">Contact information</a></li>
<li><a class="reference internal" href="#contacts" id="id12">Contacts</a></li>
<li><a class="reference internal" href="#contributors" id="id13">Contributors</a></li>
<li><a class="reference internal" href="#project-urls" id="id14">Project URLs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-python-integrator-extension" id="id15">The <tt class="docutils literal">python.integrator</tt> extension</a></li>
<li><a class="reference internal" href="#the-python-exports-extension" id="id16">The <tt class="docutils literal">python.exports</tt> extension</a><ul>
<li><a class="reference internal" href="#export-specifiers" id="id17">Export specifiers</a></li>
<li><a class="reference internal" href="#modules" id="id18">Modules</a></li>
<li><a class="reference internal" href="#namespaces" id="id19">Namespaces</a></li>
<li><a class="reference internal" href="#exports" id="id20">Exports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-python-commands-extension" id="id21">The <tt class="docutils literal">python.commands</tt> extension</a></li>
<li><a class="reference internal" href="#the-python-constraints-extension" id="id22">The <tt class="docutils literal">python.constraints</tt> extension</a><ul>
<li><a class="reference internal" href="#supported-environments" id="id23">Supported Environments</a></li>
<li><a class="reference internal" href="#extension-metadata-constraints" id="id24">Extension metadata constraints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright" id="id25">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2">Abstract</a></h1>
<p>This PEP describes several standard extensions to the Python metadata.</p>
<p>Like all metadata extensions, each standard extension format is
independently versioned. Changing any of the formats requires an update
to this PEP, but does not require an update to the core packaging metadata.</p>
</div>
<div class="section" id="pep-deferral">
<h1><a class="toc-backref" href="#id3">PEP Deferral</a></h1>
<p>This PEP depends on <a class="reference external" href="/dev/peps/pep-0426">PEP 426</a>, which has itself been deferred. See the
PEP Deferral section in that PEP for details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>These extensions may eventually be separated out into their own PEPs,
but we're already suffering from PEP overload in the packaging
metadata space.</p>
<p class="last">This PEP was initially created by slicing out large sections of earlier
drafts of <a class="reference external" href="/dev/peps/pep-0426">PEP 426</a> and making them extensions, so some of the specifics
may still be rough in the new context.</p>
</div>
</div>
<div class="section" id="standard-extension-namespace">
<h1><a class="toc-backref" href="#id4">Standard Extension Namespace</a></h1>
<p>The <tt class="docutils literal">python</tt> project on the Python Package Index refers to the CPython
reference interpreter. This namespace is used as the namespace for the
standard metadata extensions.</p>
<p>The currently defined standard extensions are:</p>
<ul class="simple">
<li><tt class="docutils literal">python.details</tt></li>
<li><tt class="docutils literal">python.project</tt></li>
<li><tt class="docutils literal">python.integrator</tt></li>
<li><tt class="docutils literal">python.exports</tt></li>
<li><tt class="docutils literal">python.commands</tt></li>
<li><tt class="docutils literal">python.constraints</tt></li>
</ul>
<p>All standard extensions are currently at version <tt class="docutils literal">1.0</tt>, and thus the
<tt class="docutils literal">extension_metadata</tt> field may be omitted without losing access to any
functionality.</p>
</div>
<div class="section" id="the-python-details-extension">
<h1><a class="toc-backref" href="#id5">The <tt class="docutils literal">python.details</tt> extension</a></h1>
<p>The <tt class="docutils literal">python.details</tt> extension allows for more information to be provided
regarding the software distribution.</p>
<p>The <tt class="docutils literal">python.details</tt> extension contains four custom subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">license</tt>: the copyright license for the distribution</li>
<li><tt class="docutils literal">keywords</tt>: package index keywords for the distribution</li>
<li><tt class="docutils literal">classifiers</tt>: package index Trove classifiers for the distribution</li>
<li><tt class="docutils literal">document_names</tt>: the names of additional metadata files</li>
</ul>
<p>All of these fields are optional. Automated tools MUST operate correctly if
a distribution does not provide them, including failing cleanly when an
operation depending on one of these fields is requested.</p>
<div class="section" id="license">
<h2><a class="toc-backref" href="#id6">License</a></h2>
<p>A short string summarising the license used for this distribution.</p>
<p>Note that distributions that provide this field should still specify any
applicable license Trove classifiers in the <a class="reference internal" href="#classifiers">Classifiers</a> field. Even
when an appropriate Trove classifier is available, the license summary can
be a good way to specify a particular version of that license, or to
indicate any variations or exception to the license.</p>
<p>This field SHOULD contain fewer than 512 characters and MUST contain fewer
than 2048.</p>
<p>This field SHOULD NOT contain any line breaks.</p>
<p>The full license text SHOULD be included as a separate file in the source
archive for the distribution. See <a class="reference internal" href="#document-names">Document names</a> for details.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;license&quot;: &quot;GPL version 3, excluding DRM provisions&quot;
</pre>
</div>
<div class="section" id="keywords">
<h2><a class="toc-backref" href="#id7">Keywords</a></h2>
<p>A list of additional keywords to be used to assist searching for the
distribution in a larger catalog.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;keywords&quot;: [&quot;comfy&quot;, &quot;chair&quot;, &quot;cushions&quot;, &quot;too silly&quot;, &quot;monty python&quot;]
</pre>
</div>
<div class="section" id="classifiers">
<h2><a class="toc-backref" href="#id8">Classifiers</a></h2>
<p>A list of strings, with each giving a single classification value
for the distribution.  Classifiers are described in <a class="reference external" href="/dev/peps/pep-0301">PEP 301</a> [2].</p>
<p>Example:</p>
<pre class="literal-block">
&quot;classifiers&quot;: [
  &quot;Development Status :: 4 - Beta&quot;,
  &quot;Environment :: Console (Text Based)&quot;,
  &quot;License :: OSI Approved :: GNU General Public License v3 (GPLv3)&quot;
]
</pre>
</div>
<div class="section" id="document-names">
<h2><a class="toc-backref" href="#id9">Document names</a></h2>
<p>Filenames for supporting documents included in the distribution's
<tt class="docutils literal"><span class="pre">dist-info</span></tt> metadata directory.</p>
<p>The following supporting documents can be named:</p>
<ul class="simple">
<li><tt class="docutils literal">description</tt>: a file containing a long description of the distribution</li>
<li><tt class="docutils literal">license</tt>: a file with the full text of the distribution's license</li>
<li><tt class="docutils literal">changelog</tt>: a file describing changes made to the distribution</li>
</ul>
<p>Supporting documents MUST be included directly in the <tt class="docutils literal"><span class="pre">dist-info</span></tt>
directory. Directory separators are NOT permitted in document names.</p>
<p>The markup format (if any) for the file is indicated by the file extension.
This allows index servers and other automated tools to render included
text documents correctly and provide feedback on rendering errors, rather
than having to guess the intended format.</p>
<p>If the filename has no extension, or the extension is not recognised, the
default rendering format MUST be plain text.</p>
<p>The following markup renderers SHOULD be used for the specified file
extensions:</p>
<ul class="simple">
<li>Plain text: <tt class="docutils literal">.txt</tt>, no extension, unknown extension</li>
<li>reStructured Text: <tt class="docutils literal">.rst</tt></li>
<li>Markdown: <tt class="docutils literal">.md</tt></li>
<li>AsciiDoc: <tt class="docutils literal">.adoc</tt>, <tt class="docutils literal">.asc</tt>, <tt class="docutils literal">.asciidoc</tt></li>
<li>HTML: <tt class="docutils literal">.html</tt>, <tt class="docutils literal">.htm</tt></li>
</ul>
<p>Automated tools MAY render one or more of the specified formats as plain
text and MAY render other markup formats beyond those listed.</p>
<p>Automated tools SHOULD NOT make any assumptions regarding the maximum length
of supporting document content, except as necessary to protect the
integrity of a service.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;document_names&quot;: {
    &quot;description&quot;: &quot;README.rst&quot;,
    &quot;license&quot;: &quot;LICENSE.rst&quot;,
    &quot;changelog&quot;: &quot;NEWS&quot;
}
</pre>
</div>
</div>
<div class="section" id="the-python-project-extension">
<h1><a class="toc-backref" href="#id10">The <tt class="docutils literal">python.project</tt> extension</a></h1>
<p>The <tt class="docutils literal">python.project</tt> extension allows for more information to be provided
regarding the creation and maintenance of the distribution.</p>
<p>The <tt class="docutils literal">python.project</tt> extension contains three custom subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">contacts</tt>: key contact points for the distribution</li>
<li><tt class="docutils literal">contributors</tt>: other contributors to the distribution</li>
<li><tt class="docutils literal">project_urls</tt>: relevant URLs for the distribution</li>
</ul>
<div class="section" id="contact-information">
<h2><a class="toc-backref" href="#id11">Contact information</a></h2>
<p>Details on individuals and organisations are recorded as mappings with
the following subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">name</tt>: the name of an individual or group</li>
<li><tt class="docutils literal">email</tt>: an email address (this may be a mailing list)</li>
<li><tt class="docutils literal">url</tt>: a URL (such as a profile page on a source code hosting service)</li>
<li><tt class="docutils literal">role</tt>: one of <tt class="docutils literal">&quot;author&quot;</tt>, <tt class="docutils literal">&quot;maintainer&quot;</tt> or <tt class="docutils literal">&quot;contributor&quot;</tt></li>
</ul>
<p>The <tt class="docutils literal">name</tt> subfield is required, the other subfields are optional.</p>
<p>If no specific role is stated, the default is <tt class="docutils literal">contributor</tt>.</p>
<p>Email addresses must be in the form <tt class="docutils literal"><span class="pre">local-part&#64;domain</span></tt> where the
local-part may be up to 64 characters long and the entire email address
contains no more than 254 characters. The formal specification of the
format is in <a class="reference external" href="http://tools.ietf.org/html/rfc5322.html">RFC 5322</a> (sections 3.2.3 and 3.4.1) and <a class="reference external" href="http://tools.ietf.org/html/rfc5321.html">RFC 5321</a>, with a more
readable form given in the informational <a class="reference external" href="http://tools.ietf.org/html/rfc3696.html">RFC 3696</a> and the associated errata.</p>
<p>The defined contributor roles are as follows:</p>
<ul class="simple">
<li><tt class="docutils literal">author</tt>: the original creator of a distribution</li>
<li><tt class="docutils literal">maintainer</tt>: the current lead contributor for a distribution, when
they are not the original creator</li>
<li><tt class="docutils literal">contributor</tt>: any other individuals or organizations involved in the
creation of the distribution</li>
</ul>
<p>Contact and contributor metadata is optional. Automated tools MUST operate
correctly if a distribution does not provide it, including failing cleanly
when an operation depending on one of these fields is requested.</p>
</div>
<div class="section" id="contacts">
<h2><a class="toc-backref" href="#id12">Contacts</a></h2>
<p>A list of contributor entries giving the recommended contact points for
getting more information about the project.</p>
<p>The example below would be suitable for a project that was in the process
of handing over from the original author to a new lead maintainer, while
operating as part of a larger development group.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;contacts&quot;: [
  {
    &quot;name&quot;: &quot;Python Packaging Authority/Distutils-SIG&quot;,
    &quot;email&quot;: &quot;distutils-sig&#64;python.org&quot;,
    &quot;url&quot;: &quot;https://bitbucket.org/pypa/&quot;
  },
  {
    &quot;name&quot;: &quot;Samantha C.&quot;,
    &quot;role&quot;: &quot;maintainer&quot;,
    &quot;email&quot;: &quot;dontblameme&#64;example.org&quot;
  },
  {
    &quot;name&quot;: &quot;Charlotte C.&quot;,
    &quot;role&quot;: &quot;author&quot;,
    &quot;email&quot;: &quot;iambecomingasketchcomedian&#64;example.com&quot;
  }
]
</pre>
</div>
<div class="section" id="contributors">
<h2><a class="toc-backref" href="#id13">Contributors</a></h2>
<p>A list of contributor entries for other contributors not already listed as
current project points of contact. The subfields within the list elements
are the same as those for the main contact field.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;contributors&quot;: [
  {&quot;name&quot;: &quot;John C.&quot;},
  {&quot;name&quot;: &quot;Erik I.&quot;},
  {&quot;name&quot;: &quot;Terry G.&quot;},
  {&quot;name&quot;: &quot;Mike P.&quot;},
  {&quot;name&quot;: &quot;Graeme C.&quot;},
  {&quot;name&quot;: &quot;Terry J.&quot;}
]
</pre>
</div>
<div class="section" id="project-urls">
<h2><a class="toc-backref" href="#id14">Project URLs</a></h2>
<p>A mapping of arbitrary text labels to additional URLs relevant to the
project.</p>
<p>While projects are free to choose their own labels and specific URLs,
it is RECOMMENDED that home page, source control, issue tracker and
documentation links be provided using the labels in the example below.</p>
<p>URL labels MUST be treated as case insensitive by automated tools, but they
are not required to be valid Python identifiers. Any legal JSON string is
permitted as a URL label.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;project_urls&quot;: {
  &quot;Documentation&quot;: &quot;https://distlib.readthedocs.org&quot;,
  &quot;Home&quot;: &quot;https://bitbucket.org/pypa/distlib&quot;,
  &quot;Repository&quot;: &quot;https://bitbucket.org/pypa/distlib/src&quot;,
  &quot;Tracker&quot;: &quot;https://bitbucket.org/pypa/distlib/issues&quot;
}
</pre>
</div>
</div>
<div class="section" id="the-python-integrator-extension">
<h1><a class="toc-backref" href="#id15">The <tt class="docutils literal">python.integrator</tt> extension</a></h1>
<p>Structurally, this extension is largely identical to the <tt class="docutils literal">python.project</tt>
extension (the extension name is the only difference).</p>
<p>However, where the <tt class="docutils literal">project</tt> metadata refers to the upstream creators
of the software, the <tt class="docutils literal">integrator</tt> metadata refers to the downstream
redistributor of a modified version.</p>
<p>If the software is being redistributed unmodified, then typically this
extension will not be used. However, if the software has been patched (for
example, backporting compatible fixes from a later version, or addressing
a platform compatibility issue), then this extension SHOULD be used, and
a local version label added to the distribution's version identifier.</p>
<p>If there are multiple redistributors in the chain, each one just overwrites
this extension with their particular metadata.</p>
</div>
<div class="section" id="the-python-exports-extension">
<h1><a class="toc-backref" href="#id16">The <tt class="docutils literal">python.exports</tt> extension</a></h1>
<p>Most Python distributions expose packages and modules for import through
the Python module namespace. Distributions may also expose other
interfaces when installed.</p>
<p>The <tt class="docutils literal">python.exports</tt> extension contains three custom subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">modules</tt>: modules exported by the distribution</li>
<li><tt class="docutils literal">namespaces</tt>: namespace packages that the distribution contributes to</li>
<li><tt class="docutils literal">exports</tt>: other Python interfaces exported by the distribution</li>
</ul>
<div class="section" id="export-specifiers">
<h2><a class="toc-backref" href="#id17">Export specifiers</a></h2>
<p>An export specifier is a string consisting of a fully qualified name, as
well as an optional extra name enclosed in square brackets. This gives the
following four possible forms for an export specifier:</p>
<pre class="literal-block">
module
module:name
module[requires_extra]
module:name[requires_extra]
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The jsonschema file currently restricts qualified names using the
Python 2 ASCII identifier rules. This may need to be reconsidered
given the more relaxed identifier rules in Python 3.</p>
</div>
<p>The meaning of the subfields is as follows:</p>
<ul class="simple">
<li><tt class="docutils literal">module</tt>: the module providing the export</li>
<li><tt class="docutils literal">name</tt>: if applicable, the qualified name of the export within the module</li>
<li><tt class="docutils literal">requires_extra</tt>: indicates the export will only work correctly if the
additional dependencies named in the given extra are available in the
installed environment</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">I tried this as a mapping with subfields, and it made the examples below
unreadable. While this PEP is mostly for tool use, readability still
matters to some degree for debugging purposes, and because I expect
snippets of the format to be reused elsewhere.</p>
</div>
</div>
<div class="section" id="modules">
<h2><a class="toc-backref" href="#id18">Modules</a></h2>
<p>A list of qualified names of modules and packages that the distribution
provides for import.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The jsonschema file currently restricts qualified names using the
Python 2 ASCII identifier rules. This may need to be reconsidered
given the more relaxed identifier rules in Python 3.</p>
</div>
<p>For names that contain dots, the portion of the name before the final dot
MUST appear either in the installed module list or in the namespace package
list.</p>
<p>To help avoid name conflicts, it is RECOMMENDED that distributions provide
a single top level module or package that matches the distribution name
(or a lower case equivalent). This requires that the distribution name also
meet the requirements of a Python identifier, which are stricter than
those for distribution names). This practice will also make it easier to
find authoritative sources for modules.</p>
<p>Index servers SHOULD allow multiple distributions to publish the same
modules, but MAY notify distribution authors of potential conflicts.</p>
<p>Installation tools SHOULD report an error when asked to install a
distribution that provides a module that is also provided by a different,
previously installed, distribution.</p>
<p>Note that attempting to import some declared modules may result in an
exception if the appropriate extras are not installed.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;modules&quot;: [&quot;chair&quot;, &quot;chair.cushions&quot;, &quot;python_sketches.nobody_expects&quot;]
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Making this a list of export specifiers instead would allow a distribution
to declare when a particular module requires a particular extra in order
to run correctly. On the other hand, there's an argument to be made that
that is the point where it starts to become worthwhile to split out a
separate distribution rather than using extras.</p>
</div>
</div>
<div class="section" id="namespaces">
<h2><a class="toc-backref" href="#id19">Namespaces</a></h2>
<p>A list of qualified names of namespace packages that the distribution
contributes modules to.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The jsonschema file currently restricts qualified names using the
Python 2 ASCII identifier rules. This may need to be reconsidered
given the more relaxed identifier rules in Python 3.</p>
</div>
<p>On versions of Python prior to Python 3.3 (which provides native namespace
package support), installation tools SHOULD emit a suitable <tt class="docutils literal">__init__.py</tt>
file to properly initialise the namespace rather than using a distribution
provided file.</p>
<p>Installation tools SHOULD emit a warning and MAY emit an error if a
distribution declares a namespace package that conflicts with the name of
an already installed module or vice-versa.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;namespaces&quot;: [&quot;python_sketches&quot;]
</pre>
</div>
<div class="section" id="exports">
<h2><a class="toc-backref" href="#id20">Exports</a></h2>
<p>The <tt class="docutils literal">exports</tt> field is a mapping containing prefixed names as keys. Each
key identifies an export group containing one or more exports published by
the distribution.</p>
<p>Export group names are defined by distributions that will then make use of
the published export information in some way. The primary use case is for
distributions that support a plugin model: defining an export group allows
other distributions to indicate which plugins they provide, how they
can be imported and accessed, and which additional dependencies (if any)
are needed for the plugin to work correctly.</p>
<p>To reduce the chance of name conflicts, export group names SHOULD use a
prefix that corresponds to a module name in the distribution that defines
the meaning of the export group. This practice will also make it easier to
find authoritative documentation for export groups.</p>
<p>Each individual export group is then a mapping of arbitrary non-empty string
keys to export specifiers. The meaning of export names within an export
group is up to the distribution that defines the export group. Creating an
appropriate definition for the export name format can allow the importing
distribution to determine whether or not an export is relevant without
needing to import every exporting module.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;exports&quot;: {
  &quot;nose.plugins.0.10&quot;: {
    &quot;chairtest&quot;: &quot;chair:NosePlugin&quot;
  }
}
</pre>
</div>
</div>
<div class="section" id="the-python-commands-extension">
<h1><a class="toc-backref" href="#id21">The <tt class="docutils literal">python.commands</tt> extension</a></h1>
<p>The <tt class="docutils literal">python.commands</tt> extension contains three custom subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">wrap_console</tt>: console wrapper scripts to be generated by the installer</li>
<li><tt class="docutils literal">wrap_gui</tt>: GUI wrapper scripts to be generated by the installer</li>
<li><tt class="docutils literal">prebuilt</tt>: scripts created by the distribution's build process and
installed directly to the configured scripts directory</li>
</ul>
<p><tt class="docutils literal">wrap_console</tt> and <tt class="docutils literal">wrap_gui</tt> are both mappings of script names to
export specifiers. The script names must follow the same naming rules as
distribution names.</p>
<p>The export specifiers for wrapper scripts must refer to either a package
with a __main__ submodule (if no <tt class="docutils literal">name</tt> subfield is given in the export
specifier) or else to a callable inside the named module.</p>
<p>Installation tools should generate appropriate wrappers as part of the
installation process.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Still needs more detail on what &quot;appropriate wrappers&quot; means. For now,
refer to what setuptools and zc.buildout generate as wrapper scripts.</p>
</div>
<p><tt class="docutils literal">prebuilt</tt> is a list of script paths, relative to the scripts directory in
a wheel file or following installation. They are provided for informational
purpose only - installing them is handled through the normal processes for
files created when building a distribution.</p>
<p>Build tools SHOULD mark this extension as requiring handling by installers.</p>
<p>Index servers SHOULD allow multiple distributions to publish the same
commands, but MAY notify distribution authors of potential conflicts.</p>
<p>Installation tools SHOULD report an error when asked to install a
distribution that provides a command that is also provided by a different,
previously installed, distribution.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;python.commands&quot;: {
  &quot;installer_must_handle&quot;: true,
  &quot;wrap_console&quot;: [{&quot;chair&quot;: &quot;chair:run_cli&quot;}],
  &quot;wrap_gui&quot;: [{&quot;chair-gui&quot;: &quot;chair:run_gui&quot;}],
  &quot;prebuilt&quot;: [&quot;reduniforms&quot;]
}
</pre>
</div>
<div class="section" id="the-python-constraints-extension">
<h1><a class="toc-backref" href="#id22">The <tt class="docutils literal">python.constraints</tt> extension</a></h1>
<p>The <tt class="docutils literal">python.constraints</tt> extension contains two custom subfields:</p>
<ul class="simple">
<li><tt class="docutils literal">environments</tt>: supported installation environments</li>
<li><tt class="docutils literal">extension_metadata</tt>: required exact matches in extension metadata
fields published by other installed components</li>
</ul>
<p>Build tools SHOULD mark this extension as requiring handling by installers.</p>
<p>Index servers SHOULD allow distributions to be uploaded with constraints
that cannot be satisfied using that index, but MAY notify distribution
authors of any such potential compatibility issues.</p>
<p>Installation tools SHOULD report an error if constraints are specified by
the distribution and the target installation environment fails to satisfy
them, MUST at least emit a warning, and MAY allow the user to
force the installation to proceed regardless.</p>
<p>Example:</p>
<pre class="literal-block">
&quot;python.constraints&quot;: {
  &quot;installer_must_handle&quot;: true,
  &quot;environments&quot;: [&quot;python_version &gt;= 2.6&quot;],
  &quot;extension_metadata&quot;: {
    &quot;fortranlib&quot;: {
      &quot;fortranlib.compatibility&quot;: {
        &quot;fortran_abi&quot;: &quot;openblas-g77&quot;
      }
    }
  }
}
</pre>
<div class="section" id="supported-environments">
<h2><a class="toc-backref" href="#id23">Supported Environments</a></h2>
<p>The <tt class="docutils literal">environments</tt> subfield is a list of strings specifying the
environments that the distribution explicitly supports. An environment is
considered supported if it matches at least one of the environment markers
given.</p>
<p>If this field is not given in the metadata, it is assumed that the
distribution supports any platform supported by Python.</p>
<p>Individual entries are environment markers, as described in <a class="reference external" href="/dev/peps/pep-0426">PEP 426</a>.</p>
<p>The two main uses of this field are to declare which versions of Python
and which underlying operating systems are supported.</p>
<p>Examples indicating supported Python versions:</p>
<pre class="literal-block">
# Supports Python 2.6+
&quot;environments&quot;: [&quot;python_version &gt;= '2.6'&quot;]

# Supports Python 2.6+ (for 2.x) or 3.3+ (for 3.x)
&quot;environments&quot;: [&quot;python_version &gt;= '3.3'&quot;,
                 &quot;'3.0' &gt; python_version &gt;= '2.6'&quot;]
</pre>
<p>Examples indicating supported operating systems:</p>
<pre class="literal-block">
# Windows only
&quot;environments&quot;: [&quot;sys_platform == 'win32'&quot;]

# Anything except Windows
&quot;environments&quot;: [&quot;sys_platform != 'win32'&quot;]

# Linux or BSD only
&quot;environments&quot;: [&quot;'linux' in sys_platform&quot;,
                 &quot;'bsd' in sys_platform&quot;]
</pre>
<p>Example where the supported Python version varies by platform:</p>
<pre class="literal-block">
# The standard library's os module has long supported atomic renaming
# on POSIX systems, but only gained atomic renaming on Windows in Python
# 3.3. A distribution that needs atomic renaming support for reliable
# operation might declare the following supported environments.
&quot;environment&quot;: [&quot;python_version &gt;= '2.6' and sys_platform != 'win32'&quot;,
                &quot;python_version &gt;= '3.3' and sys_platform == 'win32'&quot;]
</pre>
</div>
<div class="section" id="extension-metadata-constraints">
<h2><a class="toc-backref" href="#id24">Extension metadata constraints</a></h2>
<p>The <tt class="docutils literal">extension_metadata</tt> subfield is a mapping from distribution names
to extension metadata snippets that are expected to exactly match the
metadata of the named distribution in the target installation environment.</p>
<p>Each submapping then consists of a mapping from metadata extension names to
the exact expected values of a subset of fields.</p>
<p>For example, a distribution called <tt class="docutils literal">fortranlib</tt> may publish a different
FORTRAN ABI depending on how it is built, and any related projects that are
installed into the same runtime environment should use matching build
options. This can be handled by having the base distribution publish a
custom extension that indicates the build option that was used to create
the binary extensions:</p>
<pre class="literal-block">
&quot;extensions&quot;: {
  &quot;fortranlib.compatibility&quot;: {
    &quot;fortran_abi&quot;: &quot;openblas-g77&quot;
  }
}
</pre>
<p>Other distributions that contain binary extensions that need to be compatible
with the base distribution would then define a suitable constraint in their
own metadata:</p>
<pre class="literal-block">
&quot;python.constraints&quot;: {
  &quot;installer_must_handle&quot;: true,
  &quot;extension_metadata&quot;: {
    &quot;fortranlib&quot;: {
      &quot;fortranlib.compatibility&quot;: {
        &quot;fortran_abi&quot;: &quot;openblas-g77&quot;
      }
    }
  }
}
</pre>
<p>This constraint specifies that:</p>
<ul class="simple">
<li><tt class="docutils literal">fortranlib</tt> must be installed (this should also be expressed as a
normal dependency so that installers ensure it is satisfied)</li>
<li>The installed version of <tt class="docutils literal">fortranlib</tt> must include the custom
<tt class="docutils literal">fortranlib.compatibility</tt> extension in its published metadata</li>
<li>The <tt class="docutils literal">fortan_abi</tt> subfield of that extension must have the <em>exact</em>
value <tt class="docutils literal"><span class="pre">openblas-g77</span></tt>.</li>
</ul>
<p>If all of these conditions are met (the distribution is installed, the
specified extension is included in the metadata, the specified subfields
have the exact specified value), then the constraint is considered to be
satisfied.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The primary intended use case here is allowing C extensions with additional
ABI compatibility requirements to declare those in a way that any
installation tool can enforce without needing to understand the details.
In particular, many NumPy based scientific libraries need to be built
using a consistent set of FORTRAN libraries, hence the &quot;fortranlib&quot;
example.</p>
<p class="last">This is the reason there's no support for pattern matching or boolean
logic: even the &quot;simple&quot; version of this extension is relatively
complex, and there's currently no compelling rationale for making it
more complicated than it already is.</p>
</div>
</div>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id25">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
End: -->
</div>


<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">279</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">The enumerate() built-in function</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0279.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">python&#32;&#97;t&#32;rcn.com (Raymond Hettinger)</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">30-Jan-2002</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">2.3</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id8">Abstract</a></li>
<li><a class="reference internal" href="#rationale" id="id9">Rationale</a></li>
<li><a class="reference internal" href="#bdfl-pronouncements" id="id10">BDFL Pronouncements</a></li>
<li><a class="reference internal" href="#specification-for-a-new-built-in" id="id11">Specification for a new built-in</a></li>
<li><a class="reference internal" href="#references" id="id12">References</a></li>
<li><a class="reference internal" href="#copyright" id="id13">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id8">Abstract</a></h1>
<p>This PEP introduces a new built-in function, <tt class="docutils literal">enumerate()</tt> to
simplify a commonly used looping idiom.  It provides all iterable
collections with the same advantage that <tt class="docutils literal">iteritems()</tt> affords to
dictionaries -- a compact, readable, reliable index notation.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id9">Rationale</a></h1>
<p>Python 2.2 introduced the concept of an iterable interface as
proposed in <a class="reference external" href="/dev/peps/pep-0234">PEP 234</a> <a class="footnote-reference" href="#id7" id="id1">[3]</a>.  The <tt class="docutils literal">iter()</tt> factory function was provided
as common calling convention and deep changes were made to use
iterators as a unifying theme throughout Python.  The unification
came in the form of establishing a common iterable interface for
mappings, sequences, and file objects.</p>
<p>Generators, as proposed in <a class="reference external" href="/dev/peps/pep-0255">PEP 255</a> <a class="footnote-reference" href="#id5" id="id2">[1]</a>, were introduced as a means
for making it easier to create iterators, especially ones with
complex internal execution or variable states.  The availability
of generators makes it possible to improve on the loop counter
ideas in <a class="reference external" href="/dev/peps/pep-0212">PEP 212</a> <a class="footnote-reference" href="#id6" id="id3">[2]</a>.  Those ideas provided a clean syntax for
iteration with indices and values, but did not apply to all
iterable objects.  Also, that approach did not have the memory
friendly benefit provided by generators which do not evaluate the
entire sequence all at once.</p>
<p>The new proposal is to add a built-in function, <tt class="docutils literal">enumerate()</tt> which
was made possible once iterators and generators became available.
It provides all iterables with the same advantage that <tt class="docutils literal">iteritems()</tt>
affords to dictionaries -- a compact, readable, reliable index
notation.  Like <tt class="docutils literal">zip()</tt>, it is expected to become a commonly used
looping idiom.</p>
<p>This suggestion is designed to take advantage of the existing
implementation and require little additional effort to
incorporate.  It is backwards compatible and requires no new
keywords.  The proposal will go into Python 2.3 when generators
become final and are not imported from <tt class="docutils literal">__future__</tt>.</p>
</div>
<div class="section" id="bdfl-pronouncements">
<h1><a class="toc-backref" href="#id10">BDFL Pronouncements</a></h1>
<p>The new built-in function is ACCEPTED.</p>
</div>
<div class="section" id="specification-for-a-new-built-in">
<h1><a class="toc-backref" href="#id11">Specification for a new built-in</a></h1>
<pre class="literal-block">
def enumerate(collection):
   'Generates an indexed series:  (0,coll[0]), (1,coll[1]) ...'
   i = 0
   it = iter(collection)
   while 1:
      yield (i, it.next())
      i += 1
</pre>
<p>Note A: <a class="reference external" href="/dev/peps/pep-0212">PEP 212</a> Loop Counter Iteration <a class="footnote-reference" href="#id6" id="id4">[2]</a> discussed several
proposals for achieving indexing.  Some of the proposals only work
for lists unlike the above function which works for any generator,
xrange, sequence, or iterable object.  Also, those proposals were
presented and evaluated in the world prior to Python 2.2 which did
not include generators.  As a result, the non-generator version in
<a class="reference external" href="/dev/peps/pep-0212">PEP 212</a> had the disadvantage of consuming memory with a giant list
of tuples.  The generator version presented here is fast and
light, works with all iterables, and allows users to abandon the
sequence in mid-stream with no loss of computation effort.</p>
<p>There are other PEPs which touch on related issues: integer
iterators, integer for-loops, and one for modifying the arguments
to <tt class="docutils literal">range</tt> and <tt class="docutils literal">xrange</tt>.  The <tt class="docutils literal">enumerate()</tt> proposal does not preclude
the other proposals and it still meets an important need even if
those are adopted -- the need to count items in any iterable.  The
other proposals give a means of producing an index but not the
corresponding value.  This is especially problematic if a sequence
is given which doesn't support random access such as a file
object, generator, or sequence defined with <tt class="docutils literal">__getitem__</tt>.</p>
<p>Note B: Almost all of the PEP reviewers welcomed the function but
were divided as to whether there should be any built-ins.  The
main argument for a separate module was to slow the rate of
language inflation.  The main argument for a built-in was that the
function is destined to be part of a core programming style,
applicable to any object with an iterable interface.  Just as
<tt class="docutils literal">zip()</tt> solves the problem of looping over multiple sequences, the
<tt class="docutils literal">enumerate()</tt> function solves the loop counter problem.</p>
<p>If only one built-in is allowed, then <tt class="docutils literal">enumerate()</tt> is the most
important general purpose tool, solving the broadest class of
problems while improving program brevity, clarity and reliability.</p>
<p>Note C:  Various alternative names were discussed:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<tbody valign="top">
<tr><td><tt class="docutils literal">iterindexed()</tt></td>
<td>five syllables is a mouthful</td>
</tr>
<tr><td><tt class="docutils literal">index()</tt></td>
<td>nice verb but could be confused the <tt class="docutils literal">.index()</tt> method</td>
</tr>
<tr><td><tt class="docutils literal">indexed()</tt></td>
<td>widely liked however adjectives should be avoided</td>
</tr>
<tr><td><tt class="docutils literal">indexer()</tt></td>
<td>noun did not read well in a for-loop</td>
</tr>
<tr><td><tt class="docutils literal">count()</tt></td>
<td>direct and explicit but often used in other contexts</td>
</tr>
<tr><td><tt class="docutils literal">itercount()</tt></td>
<td>direct, explicit and hated by more than one person</td>
</tr>
<tr><td><tt class="docutils literal">iteritems()</tt></td>
<td>conflicts with key:value concept for dictionaries</td>
</tr>
<tr><td><tt class="docutils literal">itemize()</tt></td>
<td>confusing because <tt class="docutils literal">amap.items()</tt> != <tt class="docutils literal">list(itemize(amap))</tt></td>
</tr>
<tr><td><tt class="docutils literal">enum()</tt></td>
<td>pithy; less clear than enumerate; too similar to enum
in other languages where it has a different meaning</td>
</tr>
</tbody>
</table>
<p>All of the names involving 'count' had the further disadvantage of
implying that the count would begin from one instead of zero.</p>
<p>All of the names involving 'index' clashed with usage in database
languages where indexing implies a sorting operation rather than
linear sequencing.</p>
<p>Note D: This function was originally proposed with optional start
and stop arguments.  GvR pointed out that the function call
<tt class="docutils literal">enumerate(seqn,4,6)</tt> had an alternate, plausible interpretation as
a slice that would return the fourth and fifth elements of the
sequence.  To avoid the ambiguity, the optional arguments were
dropped even though it meant losing flexibility as a loop counter.
That flexibility was most important for the common case of
counting from one, as in:</p>
<pre class="literal-block">
for linenum, line in enumerate(source,1):  print linenum, line
</pre>
<dl class="docutils">
<dt>Comments from GvR:</dt>
<dd><p class="first"><tt class="docutils literal">filter</tt> and <tt class="docutils literal">map</tt> should die and be subsumed into list
comprehensions, not grow more variants. I'd rather introduce
built-ins that do iterator algebra (e.g. the iterzip that I've
often used as an example).</p>
<p>I like the idea of having some way to iterate over a sequence
and its index set in parallel.  It's fine for this to be a
built-in.</p>
<p class="last">I don't like the name &quot;indexed&quot;; adjectives do not make good
function names.  Maybe <tt class="docutils literal">iterindexed()</tt>?</p>
</dd>
<dt>Comments from Ka-Ping Yee:</dt>
<dd>I'm also quite happy with everything  you
proposed ... and the extra built-ins (really 'indexed' in
particular) are things I have wanted for a long time.</dd>
<dt>Comments from Neil Schemenauer:</dt>
<dd>The new built-ins sound okay.  Guido
may be concerned with increasing the number of built-ins too
much.  You might be better off selling them as part of a
module.  If you use a module then you can add lots of useful
functions (Haskell has lots of them that we could steal).</dd>
<dt>Comments for Magnus Lie Hetland:</dt>
<dd>I think indexed would be a useful and
natural built-in function. I would certainly use it a lot.  I
like <tt class="docutils literal">indexed()</tt> a lot; +1. I'm quite happy to have it make <a class="reference external" href="/dev/peps/pep-0281">PEP
281</a> obsolete. Adding a separate module for iterator utilities
seems like a good idea.</dd>
<dt>Comments from the Community:</dt>
<dd>The response to the <tt class="docutils literal">enumerate()</tt> proposal
has been close to 100% favorable.  Almost everyone loves the
idea.</dd>
<dt>Author response:</dt>
<dd><p class="first">Prior to these comments, four built-ins were proposed.
After the comments, <tt class="docutils literal">xmap</tt>, <tt class="docutils literal">xfilter</tt> and <tt class="docutils literal">xzip</tt> were withdrawn.  The
one that remains is vital for the language and is proposed by
itself.  <tt class="docutils literal">Indexed()</tt> is trivially easy to implement and can be
documented in minutes.  More importantly, it is useful in
everyday programming which does not otherwise involve explicit
use of generators.</p>
<p class="last">This proposal originally included another function <tt class="docutils literal">iterzip()</tt>.
That was subsequently implemented as the <tt class="docutils literal">izip()</tt> function in
the <tt class="docutils literal">itertools</tt> module.</p>
</dd>
</dl>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id12">References</a></h1>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><a class="reference external" href="/dev/peps/pep-0255">PEP 255</a> Simple Generators
<a class="reference external" href="http://www.python.org/dev/peps/pep-0255/">http://www.python.org/dev/peps/pep-0255/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> <a class="reference external" href="/dev/peps/pep-0212">PEP 212</a> Loop Counter Iteration
<a class="reference external" href="http://www.python.org/dev/peps/pep-0212/">http://www.python.org/dev/peps/pep-0212/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[3]</a></td><td><a class="reference external" href="/dev/peps/pep-0234">PEP 234</a> Iterators
<a class="reference external" href="http://www.python.org/dev/peps/pep-0234/">http://www.python.org/dev/peps/pep-0234/</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id13">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
fill-column: 70
End: -->
</div>


<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">PEP:</th><td class="field-body">450</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Adding A Statistics Module To The Standard Library</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference external" href="https://hg.python.org/peps/file/tip/pep-0450.txt">$Date$</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Steven D'Aprano &lt;steve&#32;&#97;t&#32;pearwood.info&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Final</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference external" href="/dev/peps/pep-0012">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">01-Aug-2013</td>
</tr>
<tr class="field"><th class="field-name">Python-Version:</th><td class="field-body">3.4</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">13-Sep-2013</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#abstract" id="id50">Abstract</a></li>
<li><a class="reference internal" href="#rationale" id="id51">Rationale</a></li>
<li><a class="reference internal" href="#comparison-to-other-languages-packages" id="id52">Comparison To Other Languages/Packages</a><ul>
<li><a class="reference internal" href="#r" id="id53">R</a></li>
<li><a class="reference internal" href="#c" id="id54">C#</a></li>
<li><a class="reference internal" href="#ruby" id="id55">Ruby</a></li>
<li><a class="reference internal" href="#php" id="id56">PHP</a></li>
<li><a class="reference internal" href="#delphi" id="id57">Delphi</a></li>
<li><a class="reference internal" href="#gnu-scientific-library" id="id58">GNU Scientific Library</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-decisions-of-the-module" id="id59">Design Decisions Of The Module</a></li>
<li><a class="reference internal" href="#api" id="id60">API</a><ul>
<li><a class="reference internal" href="#calculating-mean-median-and-mode" id="id61">Calculating mean, median and mode</a></li>
<li><a class="reference internal" href="#calculating-variance-and-standard-deviation" id="id62">Calculating variance and standard deviation</a></li>
<li><a class="reference internal" href="#other-functions" id="id63">Other functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification" id="id64">Specification</a></li>
<li><a class="reference internal" href="#what-should-be-the-name-of-the-module" id="id65">What Should Be The Name Of The Module?</a></li>
<li><a class="reference internal" href="#discussion-and-resolved-issues" id="id66">Discussion And Resolved Issues</a></li>
<li><a class="reference internal" href="#frequently-asked-questions" id="id67">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#shouldn-t-this-module-spend-time-on-pypi-before-being-considered-for-the-standard-library" id="id68">Shouldn't this module spend time on PyPI before being considered for the standard library?</a></li>
<li><a class="reference internal" href="#does-the-standard-library-really-need-yet-another-version-of-sum" id="id69">Does the standard library really need yet another version of <tt class="docutils literal">sum</tt>?</a></li>
<li><a class="reference internal" href="#will-this-module-be-backported-to-older-versions-of-python" id="id70">Will this module be backported to older versions of Python?</a></li>
<li><a class="reference internal" href="#is-this-supposed-to-replace-numpy" id="id71">Is this supposed to replace numpy?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#future-work" id="id72">Future Work</a></li>
<li><a class="reference internal" href="#references" id="id73">References</a></li>
<li><a class="reference internal" href="#copyright" id="id74">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id50">Abstract</a></h1>
<p>This PEP proposes the addition of a module for common statistics functions such
as mean, median, variance and standard deviation to the Python standard
library. See also <a class="reference external" href="http://bugs.python.org/issue18606">http://bugs.python.org/issue18606</a></p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id51">Rationale</a></h1>
<p>The proposed statistics module is motivated by the &quot;batteries included&quot;
philosophy towards the Python standard library.  Raymond Hettinger and other
senior developers have requested a quality statistics library that falls
somewhere in between high-end statistics libraries and ad hoc code. <a class="footnote-reference" href="#id26" id="id1">[1]</a>
Statistical functions such as mean, standard deviation and others are obvious
and useful batteries, familiar to any Secondary School student. Even cheap
scientific calculators typically include multiple statistical functions such
as:</p>
<ul class="simple">
<li>mean</li>
<li>population and sample variance</li>
<li>population and sample standard deviation</li>
<li>linear regression</li>
<li>correlation coefficient</li>
</ul>
<p>Graphing calculators aimed at Secondary School students typically include all
of the above, plus some or all of:</p>
<ul class="simple">
<li>median</li>
<li>mode</li>
<li>functions for calculating the probability of random variables from the
normal, t, chi-squared, and F distributions</li>
<li>inference on the mean</li>
</ul>
<p>and others <a class="footnote-reference" href="#id27" id="id2">[2]</a>.  Likewise spreadsheet applications such as Microsoft Excel,
LibreOffice and Gnumeric include rich collections of statistical
functions <a class="footnote-reference" href="#id28" id="id3">[3]</a>.</p>
<p>In contrast, Python currently has no standard way to calculate even the
simplest and most obvious statistical functions such as mean.  For those who
need statistical functions in Python, there are two obvious solutions:</p>
<ul class="simple">
<li>install numpy and/or scipy <a class="footnote-reference" href="#id29" id="id4">[4]</a>;</li>
<li>or use a Do It Yourself solution.</li>
</ul>
<p>Numpy is perhaps the most full-featured solution, but it has a few
disadvantages:</p>
<ul>
<li><p class="first">It may be overkill for many purposes.  The documentation for numpy even warns</p>
<blockquote>
<p>&quot;It can be hard to know what functions are available in numpy.  This is
not a complete list, but it does cover most of them.&quot;<a class="footnote-reference" href="#id30" id="id5">[5]</a></p>
</blockquote>
<p>and then goes on to list over 270 functions, only a small number of which are
related to statistics.</p>
</li>
<li><p class="first">Numpy is aimed at those doing heavy numerical work, and may be intimidating
to those who don't have a background in computational mathematics and
computer science.  For example, <tt class="docutils literal">numpy.mean</tt> takes four arguments:</p>
<pre class="literal-block">
mean(a, axis=None, dtype=None, out=None)
</pre>
<p>although fortunately for the beginner or casual numpy user, three are
optional and <tt class="docutils literal">numpy.mean</tt> does the right thing in simple cases:</p>
<pre class="literal-block">
&gt;&gt;&gt;  numpy.mean([1, 2, 3, 4])
2.5
</pre>
</li>
<li><p class="first">For many people, installing numpy may be difficult or impossible.  For
example, people in corporate environments may have to go through a difficult,
time-consuming process before being permitted to install third-party
software.  For the casual Python user, having to learn about installing
third-party packages in order to average a list of numbers is unfortunate.</p>
</li>
</ul>
<p>This leads to option number 2, DIY statistics functions.  At first glance, this
appears to be an attractive option, due to the apparent simplicity of common
statistical functions.  For example:</p>
<pre class="literal-block">
def mean(data):
    return sum(data)/len(data)

def variance(data):
    # Use the Computational Formula for Variance.
    n = len(data)
    ss = sum(x**2 for x in data) - (sum(data)**2)/n
    return ss/(n-1)

def standard_deviation(data):
    return math.sqrt(variance(data))
</pre>
<p>The above appears to be correct with a casual test:</p>
<pre class="literal-block">
&gt;&gt;&gt; data = [1, 2, 4, 5, 8]
&gt;&gt;&gt; variance(data)
7.5
</pre>
<p>But adding a constant to every data point should not change the variance:</p>
<pre class="literal-block">
&gt;&gt;&gt; data = [x+1e12 for x in data]
&gt;&gt;&gt; variance(data)
0.0
</pre>
<p>And variance should <em>never</em> be negative:</p>
<pre class="literal-block">
&gt;&gt;&gt; variance(data*100)
-1239429440.1282566
</pre>
<p>By contrast, the proposed reference implementation gets the exactly correct
answer 7.5 for the first two examples, and a reasonably close answer for the
third: 6.012. numpy does no better <a class="footnote-reference" href="#id31" id="id6">[6]</a>.</p>
<p>Even simple statistical calculations contain traps for the unwary, starting
with the Computational Formula itself.  Despite the name, it is numerically
unstable and can be extremely inaccurate, as can be seen above.  It is
completely unsuitable for computation by computer <a class="footnote-reference" href="#id32" id="id7">[7]</a>.  This problem plagues
users of many programming language, not just Python <a class="footnote-reference" href="#id33" id="id8">[8]</a>, as coders reinvent
the same numerically inaccurate code over and over again <a class="footnote-reference" href="#id34" id="id9">[9]</a>, or advise others
to do so <a class="footnote-reference" href="#id35" id="id10">[10]</a>.</p>
<p>It isn't just the variance and standard deviation. Even the mean is not quite
as straightforward as it might appear.  The above implementation seems too
simple to have problems, but it does:</p>
<ul>
<li><p class="first">The built-in <tt class="docutils literal">sum</tt> can lose accuracy when dealing with floats of wildly
differing magnitude.  Consequently, the above naive <tt class="docutils literal">mean</tt> fails this
&quot;torture test&quot;:</p>
<pre class="literal-block">
assert mean([1e30, 1, 3, -1e30]) == 1
</pre>
<p>returning 0 instead of 1, a purely computational error of 100%.</p>
</li>
<li><p class="first">Using <tt class="docutils literal">math.fsum</tt> inside <tt class="docutils literal">mean</tt> will make it more accurate with float
data, but it also has the side-effect of converting any arguments to float
even when unnecessary.  E.g. we should expect the mean of a list of Fractions
to be a Fraction, not a float.</p>
</li>
</ul>
<p>While the above mean implementation does not fail quite as catastrophically as
the naive variance does, a standard library function can do much better than
the DIY versions.</p>
<p>The example above involves an especially bad set of data, but even for more
realistic data sets accuracy is important.  The first step in interpreting
variation in data (including dealing with ill-conditioned data) is often to
standardize it to a series with variance 1 (and often mean 0).  This
standardization requires accurate computation of the mean and variance of the
raw series.  Naive computation of mean and variance can lose precision very
quickly.  Because precision bounds accuracy, it is important to use the most
precise algorithms for computing mean and variance that are practical, or the
results of standardization are themselves useless.</p>
</div>
<div class="section" id="comparison-to-other-languages-packages">
<h1><a class="toc-backref" href="#id52">Comparison To Other Languages/Packages</a></h1>
<p>The proposed statistics library is not intended to be a competitor to such
third-party libraries as numpy/scipy, or of proprietary full-featured
statistics packages aimed at professional statisticians such as Minitab, SAS
and Matlab.  It is aimed at the level of graphing and scientific calculators.</p>
<p>Most programming languages have little or no built-in support for statistics
functions.  Some exceptions:</p>
<div class="section" id="r">
<h2><a class="toc-backref" href="#id53">R</a></h2>
<p>R (and its proprietary cousin, S) is a programming language designed for
statistics work. It is extremely popular with statisticians and is extremely
feature-rich <a class="footnote-reference" href="#id36" id="id11">[11]</a>.</p>
</div>
<div class="section" id="c">
<h2><a class="toc-backref" href="#id54">C#</a></h2>
<p>The C# LINQ package includes extension methods to calculate the average of
enumerables <a class="footnote-reference" href="#id37" id="id12">[12]</a>.</p>
</div>
<div class="section" id="ruby">
<h2><a class="toc-backref" href="#id55">Ruby</a></h2>
<p>Ruby does not ship with a standard statistics module, despite some apparent
demand <a class="footnote-reference" href="#id38" id="id13">[13]</a>.  Statsample appears to be a feature-rich third-party library,
aiming to compete with R <a class="footnote-reference" href="#id39" id="id14">[14]</a>.</p>
</div>
<div class="section" id="php">
<h2><a class="toc-backref" href="#id56">PHP</a></h2>
<p>PHP has an extremely feature-rich (although mostly undocumented) set of
advanced statistical functions <a class="footnote-reference" href="#id40" id="id15">[15]</a>.</p>
</div>
<div class="section" id="delphi">
<h2><a class="toc-backref" href="#id57">Delphi</a></h2>
<p>Delphi includes standard statistical functions including Mean, Sum,
Variance, TotalVariance, MomentSkewKurtosis in its Math library <a class="footnote-reference" href="#id41" id="id16">[16]</a>.</p>
</div>
<div class="section" id="gnu-scientific-library">
<h2><a class="toc-backref" href="#id58">GNU Scientific Library</a></h2>
<p>The GNU Scientific Library includes standard statistical functions,
percentiles, median and others <a class="footnote-reference" href="#id42" id="id17">[17]</a>.  One innovation I have borrowed from the
GSL is to allow the caller to optionally specify the pre-calculated mean of
the sample (or an a priori known population mean) when calculating the variance
and standard deviation <a class="footnote-reference" href="#id43" id="id18">[18]</a>.</p>
</div>
</div>
<div class="section" id="design-decisions-of-the-module">
<h1><a class="toc-backref" href="#id59">Design Decisions Of The Module</a></h1>
<p>My intention is to start small and grow the library as needed, rather than try
to include everything from the start.  Consequently, the current reference
implementation includes only a small number of functions: mean, variance,
standard deviation, median, mode. (See the reference implementation for a full
list.)</p>
<p>I have aimed for the following design features:</p>
<ul class="simple">
<li>Correctness over speed.  It is easier to speed up a correct but slow function
than to correct a fast but buggy one.</li>
<li>Concentrate on data in sequences, allowing two-passes over the data, rather
than potentially compromise on accuracy for the sake of a one-pass algorithm.
Functions expect data will be passed as a list or other sequence; if given an
iterator, they may internally convert to a list.</li>
<li>Functions should, as much as possible, honour any type of numeric data. E.g.
the mean of a list of Decimals should be a Decimal, not a float. When this is
not possible, treat float as the &quot;lowest common data type&quot;.</li>
<li>Although functions support data sets of floats, Decimals or Fractions, there
is no guarantee that <em>mixed</em> data sets will be supported. (But on the other
hand, they aren't explicitly rejected either.)</li>
<li>Plenty of documentation, aimed at readers who understand the basic concepts
but may not know (for example) which variance they should use (population or
sample?).  Mathematicians and statisticians have a terrible habit of being
inconsistent with both notation and terminology <a class="footnote-reference" href="#id44" id="id19">[19]</a>, and having spent many
hours making sense of the contradictory/confusing definitions in use, it is
only fair that I do my best to clarify rather than obfuscate the topic.</li>
<li>But avoid going into tedious <a class="footnote-reference" href="#id45" id="id20">[20]</a> mathematical detail.</li>
</ul>
</div>
<div class="section" id="api">
<h1><a class="toc-backref" href="#id60">API</a></h1>
<p>The initial version of the library will provide univariate (single variable)
statistics functions.  The general API will be based on a functional model
<tt class="docutils literal">function(data, <span class="pre">...)</span> <span class="pre">-&gt;</span> result</tt>, where <tt class="docutils literal">data</tt> is a mandatory iterable of
(usually) numeric data.</p>
<p>The author expects that lists will be the most common data type used, but any
iterable type should be acceptable.  Where necessary, functions may convert to
lists internally.  Where possible, functions are expected to conserve the type
of the data values, for example, the mean of a list of Decimals should be a
Decimal rather than float.</p>
<div class="section" id="calculating-mean-median-and-mode">
<h2><a class="toc-backref" href="#id61">Calculating mean, median and mode</a></h2>
<p>The <tt class="docutils literal">mean</tt>, <tt class="docutils literal">median*</tt> and <tt class="docutils literal">mode</tt> functions take a single mandatory
argument and return the appropriate statistic, e.g.:</p>
<pre class="literal-block">
&gt;&gt;&gt; mean([1, 2, 3])
2.0
</pre>
<p>Functions provided are:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><tt class="docutils literal">mean(data)</tt></dt>
<dd>arithmetic mean of <em>data</em>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">median(data)</tt></dt>
<dd>median (middle value) of <em>data</em>, taking the average of the two
middle values when there are an even number of values.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">median_high(data)</tt></dt>
<dd>high median of <em>data</em>, taking the larger of the two middle
values when the number of items is even.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">median_low(data)</tt></dt>
<dd>low median of <em>data</em>, taking the smaller of the two middle
values when the number of items is even.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">median_grouped(data, interval=1)</tt></dt>
<dd>50th percentile of grouped <em>data</em>, using interpolation.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">mode(data)</tt></dt>
<dd>most common <em>data</em> point.</dd>
</dl>
</li>
</ul>
<p><tt class="docutils literal">mode</tt> is the sole exception to the rule that the data argument must be
numeric.  It will also accept an iterable of nominal data, such as strings.</p>
</div>
<div class="section" id="calculating-variance-and-standard-deviation">
<h2><a class="toc-backref" href="#id62">Calculating variance and standard deviation</a></h2>
<p>In order to be similar to scientific calculators, the statistics module will
include separate functions for population and sample variance and standard
deviation.  All four functions have similar signatures, with a single mandatory
argument, an iterable of numeric data, e.g.:</p>
<pre class="literal-block">
&gt;&gt;&gt; variance([1, 2, 2, 2, 3])
0.5
</pre>
<p>All four functions also accept a second, optional, argument, the mean of the
data.  This is modelled on a similar API provided by the GNU Scientific
Library <a class="footnote-reference" href="#id43" id="id21">[18]</a>.  There are three use-cases for using this argument, in no
particular order:</p>
<ol class="arabic simple">
<li>The value of the mean is known <em>a priori</em>.</li>
<li>You have already calculated the mean, and wish to avoid calculating
it again.</li>
<li>You wish to (ab)use the variance functions to calculate the second
moment about some given point other than the mean.</li>
</ol>
<p>In each case, it is the caller's responsibility to ensure that given
argument is meaningful.</p>
<p>Functions provided are:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><tt class="docutils literal">variance(data, xbar=None)</tt></dt>
<dd>sample variance of <em>data</em>, optionally using <em>xbar</em> as the sample mean.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">stdev(data, xbar=None)</tt></dt>
<dd>sample standard deviation of <em>data</em>, optionally using <em>xbar</em> as the
sample mean.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">pvariance(data, mu=None)</tt></dt>
<dd>population variance of <em>data</em>, optionally using <em>mu</em> as the population
mean.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal">pstdev(data, mu=None)</tt></dt>
<dd>population standard deviation of <em>data</em>, optionally using <em>mu</em> as the
population mean.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="other-functions">
<h2><a class="toc-backref" href="#id63">Other functions</a></h2>
<p>There is one other public function:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><tt class="docutils literal">sum(data, start=0)</tt></dt>
<dd>high-precision sum of numeric <em>data</em>.</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id64">Specification</a></h1>
<p>As the proposed reference implementation is in pure Python, other Python
implementations can easily make use of the module unchanged, or adapt it as
they see fit.</p>
</div>
<div class="section" id="what-should-be-the-name-of-the-module">
<h1><a class="toc-backref" href="#id65">What Should Be The Name Of The Module?</a></h1>
<p>This will be a top-level module <tt class="docutils literal">statistics</tt>.</p>
<p>There was some interest in turning <tt class="docutils literal">math</tt> into a package, and making this a
sub-module of <tt class="docutils literal">math</tt>, but the general consensus eventually agreed on a
top-level module.  Other potential but rejected names included <tt class="docutils literal">stats</tt> (too
much risk of confusion with existing <tt class="docutils literal">stat</tt> module), and <tt class="docutils literal">statslib</tt>
(described as &quot;too C-like&quot;).</p>
</div>
<div class="section" id="discussion-and-resolved-issues">
<h1><a class="toc-backref" href="#id66">Discussion And Resolved Issues</a></h1>
<p>This proposal has been previously discussed here <a class="footnote-reference" href="#id46" id="id22">[21]</a>.</p>
<p>A number of design issues were resolved during the discussion on Python-Ideas
and the initial code review.  There was a lot of concern about the addition of
yet another <tt class="docutils literal">sum</tt> function to the standard library, see the FAQs below for
more details.  In addition, the initial implementation of <tt class="docutils literal">sum</tt> suffered from
some rounding issues and other design problems when dealing with Decimals.
Oscar Benjamin's assistance in resolving this was invaluable.</p>
<p>Another issue was the handling of data in the form of iterators.  The first
implementation of variance silently swapped between a one- and two-pass
algorithm, depending on whether the data was in the form of an iterator or
sequence.  This proved to be a design mistake, as the calculated variance could
differ slightly depending on the algorithm used, and <tt class="docutils literal">variance</tt> etc. were
changed to internally generate a list and always use the more accurate two-pass
implementation.</p>
<p>One controversial design involved the functions to calculate median, which were
implemented as attributes on the <tt class="docutils literal">median</tt> callable, e.g. <tt class="docutils literal">median</tt>,
<tt class="docutils literal">median.low</tt>, <tt class="docutils literal">median.high</tt> etc.  Although there is at least one existing
use of this style in the standard library, in <tt class="docutils literal">unittest.mock</tt>, the code
reviewers felt that this was too unusual for the standard library.
Consequently, the design has been changed to a more traditional design of
separate functions with a pseudo-namespace naming convention, <tt class="docutils literal">median_low</tt>,
<tt class="docutils literal">median_high</tt>, etc.</p>
<p>Another issue that was of concern to code reviewers was the existence of a
function calculating the sample mode of continuous data, with some people
questioning the choice of algorithm, and whether it was a sufficiently common
need to be included.  So it was dropped from the API, and <tt class="docutils literal">mode</tt> now
implements only the basic schoolbook algorithm based on counting unique values.</p>
<p>Another significant point of discussion was calculating statistics of
<tt class="docutils literal">timedelta</tt> objects.  Although the statistics module will not directly
support <tt class="docutils literal">timedelta</tt> objects, it is possible to support this use-case by
converting them to numbers first using the <tt class="docutils literal">timedelta.total_seconds</tt> method.</p>
</div>
<div class="section" id="frequently-asked-questions">
<h1><a class="toc-backref" href="#id67">Frequently Asked Questions</a></h1>
<div class="section" id="shouldn-t-this-module-spend-time-on-pypi-before-being-considered-for-the-standard-library">
<h2><a class="toc-backref" href="#id68">Shouldn't this module spend time on PyPI before being considered for the standard library?</a></h2>
<p>Older versions of this module have been available on PyPI <a class="footnote-reference" href="#id47" id="id23">[22]</a> since 2010.
Being much simpler than numpy, it does not require many years of external
development.</p>
</div>
<div class="section" id="does-the-standard-library-really-need-yet-another-version-of-sum">
<h2><a class="toc-backref" href="#id69">Does the standard library really need yet another version of <tt class="docutils literal">sum</tt>?</a></h2>
<p>This proved to be the most controversial part of the reference implementation.
In one sense, clearly three sums is two too many.  But in another sense, yes.
The reasons why the two existing versions are unsuitable are described
here <a class="footnote-reference" href="#id48" id="id24">[23]</a> but the short summary is:</p>
<ul class="simple">
<li>the built-in sum can lose precision with floats;</li>
<li>the built-in sum accepts any non-numeric data type that supports the <tt class="docutils literal">+</tt>
operator, apart from strings and bytes;</li>
<li><tt class="docutils literal">math.fsum</tt> is high-precision, but coerces all arguments to float.</li>
</ul>
<p>There was some interest in &quot;fixing&quot; one or the other of the existing sums. If
this occurs before 3.4 feature-freeze, the decision to keep <tt class="docutils literal">statistics.sum</tt>
can be re-considered.</p>
</div>
<div class="section" id="will-this-module-be-backported-to-older-versions-of-python">
<h2><a class="toc-backref" href="#id70">Will this module be backported to older versions of Python?</a></h2>
<p>The module currently targets 3.3, and I will make it available on PyPI for
3.3 for the foreseeable future.  Backporting to older versions of the 3.x
series is likely (but not yet decided).  Backporting to 2.7 is less likely but
not ruled out.</p>
</div>
<div class="section" id="is-this-supposed-to-replace-numpy">
<h2><a class="toc-backref" href="#id71">Is this supposed to replace numpy?</a></h2>
<p>No. While it is likely to grow over the years (see open issues below) it is
not aimed to replace, or even compete directly with, numpy.  Numpy is a
full-featured numeric library aimed at professionals, the nuclear reactor of
numeric libraries in the Python ecosystem. This is just a battery, as in
&quot;batteries included&quot;, and is aimed at an intermediate level somewhere between
&quot;use numpy&quot; and &quot;roll your own version&quot;.</p>
</div>
</div>
<div class="section" id="future-work">
<h1><a class="toc-backref" href="#id72">Future Work</a></h1>
<ul>
<li><p class="first">At this stage, I am unsure of the best API for multivariate statistical
functions such as linear regression, correlation coefficient, and covariance.
Possible APIs include:</p>
<ul>
<li><p class="first">Separate arguments for x and y data:</p>
<pre class="literal-block">
function([x0, x1, ...], [y0, y1, ...])
</pre>
</li>
<li><p class="first">A single argument for (x, y) data:</p>
<pre class="literal-block">
function([(x0, y0), (x1, y1), ...])
</pre>
<p>This API is preferred by GvR <a class="footnote-reference" href="#id49" id="id25">[24]</a>.</p>
</li>
<li><p class="first">Selecting arbitrary columns from a 2D array:</p>
<pre class="literal-block">
function([[a0, x0, y0, z0], [a1, x1, y1, z1], ...], x=1, y=2)
</pre>
</li>
<li><p class="first">Some combination of the above.</p>
</li>
</ul>
<p>In the absence of a consensus of preferred API for multivariate stats, I will
defer including such multivariate functions until Python 3.5.</p>
</li>
<li><p class="first">Likewise, functions for calculating probability of random variables and
inference testing (e.g. Student's t-test) will be deferred until 3.5.</p>
</li>
<li><p class="first">There is considerable interest in including one-pass functions that can
calculate multiple statistics from data in iterator form, without having to
convert to a list. The experimental <tt class="docutils literal">stats</tt> package on PyPI includes
co-routine versions of statistics functions. Including these will be deferred
to 3.5.</p>
</li>
</ul>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id73">References</a></h1>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2010-October/104721.html">https://mail.python.org/pipermail/python-dev/2010-October/104721.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id27" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://support.casio.com/pdf/004/CP330PLUSver310_Soft_E.pdf">http://support.casio.com/pdf/004/CP330PLUSver310_Soft_E.pdf</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id28" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><p class="first">Gnumeric::
<a class="reference external" href="https://projects.gnome.org/gnumeric/functions.shtml">https://projects.gnome.org/gnumeric/functions.shtml</a></p>
<p class="last">LibreOffice:
<a class="reference external" href="https://help.libreoffice.org/Calc/Statistical_Functions_Part_One">https://help.libreoffice.org/Calc/Statistical_Functions_Part_One</a>
<a class="reference external" href="https://help.libreoffice.org/Calc/Statistical_Functions_Part_Two">https://help.libreoffice.org/Calc/Statistical_Functions_Part_Two</a>
<a class="reference external" href="https://help.libreoffice.org/Calc/Statistical_Functions_Part_Three">https://help.libreoffice.org/Calc/Statistical_Functions_Part_Three</a>
<a class="reference external" href="https://help.libreoffice.org/Calc/Statistical_Functions_Part_Four">https://help.libreoffice.org/Calc/Statistical_Functions_Part_Four</a>
<a class="reference external" href="https://help.libreoffice.org/Calc/Statistical_Functions_Part_Five">https://help.libreoffice.org/Calc/Statistical_Functions_Part_Five</a></p>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id29" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td>Scipy: <a class="reference external" href="http://scipy-central.org/">http://scipy-central.org/</a>
Numpy: <a class="reference external" href="http://www.numpy.org/">http://www.numpy.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id30" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[5]</a></td><td><a class="reference external" href="http://wiki.scipy.org/Numpy_Functions_by_Category">http://wiki.scipy.org/Numpy_Functions_by_Category</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id31" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[6]</a></td><td>Tested with numpy 1.6.1 and Python 2.7.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id32" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[7]</a></td><td><a class="reference external" href="http://www.johndcook.com/blog/2008/09/26/comparing-three-methods-of-computing-standard-deviation/">http://www.johndcook.com/blog/2008/09/26/comparing-three-methods-of-computing-standard-deviation/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id33" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[8]</a></td><td><a class="reference external" href="http://rosettacode.org/wiki/Standard_deviation">http://rosettacode.org/wiki/Standard_deviation</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id34" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[9]</a></td><td><a class="reference external" href="https://bitbucket.org/larsyencken/simplestats/src/c42e048a6625/src/basic.py">https://bitbucket.org/larsyencken/simplestats/src/c42e048a6625/src/basic.py</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id35" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[10]</a></td><td><a class="reference external" href="http://stackoverflow.com/questions/2341340/calculate-mean-and-variance-with-one-iteration">http://stackoverflow.com/questions/2341340/calculate-mean-and-variance-with-one-iteration</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id36" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[11]</a></td><td><a class="reference external" href="http://www.r-project.org/">http://www.r-project.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id37" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[12]</a></td><td><a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx">http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id38" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[13]</a></td><td><a class="reference external" href="https://www.bcg.wisc.edu/webteam/support/ruby/standard_deviation">https://www.bcg.wisc.edu/webteam/support/ruby/standard_deviation</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id39" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id14">[14]</a></td><td><a class="reference external" href="http://ruby-statsample.rubyforge.org/">http://ruby-statsample.rubyforge.org/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id40" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[15]</a></td><td><a class="reference external" href="http://www.php.net/manual/en/ref.stats.php">http://www.php.net/manual/en/ref.stats.php</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id41" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id16">[16]</a></td><td><a class="reference external" href="http://www.ayton.id.au/gary/it/Delphi/D_maths.htm#Delphi%20Statistical%20functions">http://www.ayton.id.au/gary/it/Delphi/D_maths.htm#Delphi%20Statistical%20functions</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id42" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[17]</a></td><td><a class="reference external" href="http://www.gnu.org/software/gsl/manual/html_node/Statistics.html">http://www.gnu.org/software/gsl/manual/html_node/Statistics.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id43" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[18]</td><td><em>(<a class="fn-backref" href="#id18">1</a>, <a class="fn-backref" href="#id21">2</a>)</em> <a class="reference external" href="http://www.gnu.org/software/gsl/manual/html_node/Mean-and-standard-deviation-and-variance.html">http://www.gnu.org/software/gsl/manual/html_node/Mean-and-standard-deviation-and-variance.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id44" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[19]</a></td><td><a class="reference external" href="http://mathworld.wolfram.com/Skewness.html">http://mathworld.wolfram.com/Skewness.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[20]</a></td><td>At least, tedious to those who don't like this sort of thing.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id46" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[21]</a></td><td><a class="reference external" href="https://mail.python.org/pipermail/python-ideas/2011-September/011524.html">https://mail.python.org/pipermail/python-ideas/2011-September/011524.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id47" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[22]</a></td><td><a class="reference external" href="https://pypi.python.org/pypi/stats/">https://pypi.python.org/pypi/stats/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id48" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id24">[23]</a></td><td><a class="reference external" href="https://mail.python.org/pipermail/python-ideas/2013-August/022630.html">https://mail.python.org/pipermail/python-ideas/2013-August/022630.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id49" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[24]</a></td><td><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2013-September/128429.html">https://mail.python.org/pipermail/python-dev/2013-September/128429.html</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id74">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
</div>

